{"version":3,"file":"Tablist.js","sourceRoot":"","sources":["../../src/widgets/Tablist.ts"],"names":[],"mappings":"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","sourcesContent":["import { find } from '@dojo/shim/array';\nimport { v, w } from '@dojo/widget-core/d';\nimport { WNode } from '@dojo/widget-core/interfaces';\nimport Dimensions, { DimensionResults } from '@dojo/widget-core/meta/Dimensions';\nimport { ThemeableMixin, ThemeableProperties, theme } from '@dojo/widget-core/mixins/Themeable';\nimport WidgetBase from '@dojo/widget-core/WidgetBase';\nimport ActionBar, { ActionBarButton } from './ActionBar';\nimport ScrollBar from './ScrollBar';\nimport Hover from './meta/Hover';\n\nimport * as iconCss from '../styles/icons.m.css';\nimport * as tabCss from '../styles/tab.m.css';\nimport * as tablistCss from '../styles/tablist.m.css';\nimport * as tablistScrollbarCss from '../styles/tablistscrollbar.m.css';\n\nconst ThemeableBase = ThemeableMixin(WidgetBase);\n\nexport interface TabProperties extends ThemeableProperties {\n\t/**\n\t * The icon class to set on the tab\n\t */\n\ticonClass?: string;\n\n\t/**\n\t * The label for the tab\n\t */\n\tlabel: string;\n\n\t/**\n\t * An extended description for the label which appears alongside the label\n\t */\n\tlabelDescription?: string;\n\n\t/**\n\t * Determines if the tab displays in a selected state or not\n\t */\n\tselected?: boolean;\n\n\t/**\n\t * The title of the tab, which is for a11y and when hinting on the tab\n\t */\n\ttitle?: string;\n\n\t/**\n\t * Called when a tab is attempted to be closed\n\t * @param key The key of the tab\n\t * @param label The label of the tab\n\t */\n\tonClose?(key: string | number | undefined, label: string): void;\n\n\t/**\n\t * Called when a tab is attempted to be selected\n\t * @param key The key of the tab\n\t * @param label The label of the tab\n\t */\n\tonSelect?(key: string | number | undefined, label: string): void;\n}\n\n/**\n * A widget which provides a tab representation of its properties\n */\n@theme(tabCss)\nexport class Tab extends ThemeableBase<TabProperties, null> {\n\tprivate _onclick() {\n\t\tconst { key, label, onSelect, selected } = this.properties;\n\t\tif (!selected && onSelect) {\n\t\t\tonSelect(key, label);\n\t\t}\n\t}\n\n\tprivate _onActionBarButtonClick = () => {\n\t\tconst { key, label, onClose } = this.properties;\n\t\tonClose && onClose(key, label);\n\t}\n\n\trender() {\n\t\tconst { iconClass, key, label, labelDescription, selected, title } = this.properties;\n\t\treturn v('div', {\n\t\t\t'aria-label': `${label}, tab`,\n\t\t\tclasses: this.classes(tabCss.root, selected ? tabCss.selected : null).fixed(tabCss.rootFixed),\n\t\t\tkey,\n\t\t\trole: 'tab',\n\t\t\ttabIndex: 0,\n\t\t\ttitle,\n\n\t\t\tonclick: this._onclick\n\t\t}, [\n\t\t\tv('div', {\n\t\t\t\tclasses: this.classes(tabCss.label).fixed(tabCss.labelFixed, iconCss.label, iconClass || null),\n\t\t\t\ttitle\n\t\t\t}, [\n\t\t\t\tv('a', {\n\t\t\t\t\tclasses: this.classes().fixed(tabCss.link)\n\t\t\t\t}, [ label ]),\n\t\t\t\tv('span', {\n\t\t\t\t\tclasses: this.classes(tabCss.description).fixed(tabCss.descriptionFixed)\n\t\t\t\t}, [ labelDescription ])\n\t\t\t]),\n\t\t\tv('div', {\n\t\t\t\tclasses: this.classes(tabCss.closer),\n\t\t\t\tkey: 'closer'\n\t\t\t}, [\n\t\t\t\tw(ActionBar, {\n\t\t\t\t\tlabel: 'Tab actions'\n\t\t\t\t}, [\n\t\t\t\t\tw(ActionBarButton, {\n\t\t\t\t\t\ticonClass: tabCss.closeIcon,\n\t\t\t\t\t\tlabel: `Close ${label}`,\n\t\t\t\t\t\tonClick: this._onActionBarButtonClick\n\t\t\t\t\t})\n\t\t\t\t])\n\t\t\t])\n\t\t]);\n\t}\n}\n\n/**\n * A scrollbar where the theme is tied to the Tablist\n */\n@theme(tablistScrollbarCss)\nclass TablistScrollBar extends ScrollBar {}\n\n/**\n * A widget which contains tabs\n */\n@theme(tablistCss)\nexport default class Tablist extends ThemeableBase<ThemeableProperties, WNode<Tab>> {\n\tprivate _cachedSelectedKey: string | number | undefined;\n\tprivate _position = 0;\n\n\tprivate _getChildren() {\n\t\treturn this.children.map((child) => {\n\t\t\tif (!child) {\n\t\t\t\treturn child;\n\t\t\t}\n\t\t\treturn v('div', {\n\t\t\t\tkey: child.properties.key,\n\t\t\t\tclasses: this.classes(tablistCss.tab).fixed(tablistCss.tabFixed)\n\t\t\t}, [ child ]);\n\t\t});\n\t}\n\n\tprivate _getSelectedKey() {\n\t\tconst { children } = this;\n\t\tconst selectedChild = find(children, (child) => {\n\t\t\treturn Boolean(child && child.properties.selected);\n\t\t});\n\t\tif (selectedChild && selectedChild.properties.key) {\n\t\t\treturn selectedChild.properties.key;\n\t\t}\n\t}\n\n\tprivate _onScroll(delta: number) {\n\t\tthis._position += delta;\n\t\tthis.invalidate();\n\t}\n\n\tprivate _onwheel = (event: WheelEvent) => {\n\t\tconst { deltaX: delta } = event;\n\t\tif (delta) {\n\t\t\tevent.preventDefault();\n\t\t\tthis._position += delta;\n\t\t\tthis.invalidate();\n\t\t}\n\t}\n\n\tprivate _setPosition(dimensions: DimensionResults) {\n\t\tconst selectedKey = this._getSelectedKey();\n\t\tif (selectedKey && selectedKey !== this._cachedSelectedKey) {\n\t\t\tconst selectedDimensions = this.meta(Dimensions).get(selectedKey);\n\t\t\tif (selectedDimensions.size.width) {\n\t\t\t\tthis._cachedSelectedKey = selectedKey;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this._position > selectedDimensions.offset.left) {\n\t\t\t\tthis._position = selectedDimensions.offset.left;\n\t\t\t}\n\t\t\telse if ((this._position + dimensions.size.width) < (selectedDimensions.offset.left + selectedDimensions.offset.width)) {\n\t\t\t\tthis._position = selectedDimensions.offset.left + selectedDimensions.offset.width - dimensions.size.width;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (this._position < 0)  {\n\t\t\t\tthis._position = 0;\n\t\t\t}\n\t\t\telse if ((this._position + dimensions.size.width) > dimensions.scroll.width) {\n\t\t\t\tthis._position = dimensions.scroll.width - dimensions.size.width;\n\t\t\t}\n\t\t}\n\t}\n\n\trender () {\n\t\tconst visible = this.meta(Hover).get('root');\n\t\tconst tablistDimensions = this.meta(Dimensions).get('tablist');\n\t\tthis._setPosition(tablistDimensions);\n\n\t\tconst { _position, properties: { theme } } = this;\n\n\t\treturn v('div', {\n\t\t\tclasses: this.classes(tablistCss.root).fixed(tablistCss.rootFixed),\n\t\t\tkey: 'root',\n\t\t\trole: 'presentation'\n\t\t}, [\n\t\t\tv('div', {\n\t\t\t\tclasses: this.classes(tablistCss.tablist).fixed(tablistCss.tablistFixed),\n\t\t\t\tkey: 'tablist',\n\t\t\t\trole: 'tablist',\n\t\t\t\tstyles: {\n\t\t\t\t\tleft: _position ? `-${_position}px` : '0'\n\t\t\t\t},\n\n\t\t\t\tonwheel: this._onwheel\n\t\t\t}, this._getChildren()),\n\t\t\tw(TablistScrollBar, {\n\t\t\t\thorizontal: true,\n\t\t\t\tposition: _position,\n\t\t\t\tsize: tablistDimensions.scroll.width,\n\t\t\t\tsliderSize: tablistDimensions.size.width,\n\t\t\t\ttheme,\n\t\t\t\tvisible,\n\n\t\t\t\tonScroll: this._onScroll\n\t\t\t})\n\t\t]);\n\t}\n}\n"]}