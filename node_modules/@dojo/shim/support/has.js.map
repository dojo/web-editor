{"version":3,"file":"has.js","sourceRoot":"","sources":["has.ts"],"names":[],"mappings":"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","sourcesContent":["import has, { add } from '@dojo/has/has';\nimport global from '../global';\n\nexport default has;\nexport * from '@dojo/has/has';\n\n/* ECMAScript 6 and 7 Features */\n\n/* Array */\nadd('es6-array', () => {\n\treturn [\n\t\t'from',\n\t\t'of'\n\t].every((key) => key in global.Array) && [\n\t\t'findIndex',\n\t\t'find',\n\t\t'copyWithin'\n\t].every((key) => key in global.Array.prototype);\n}, true);\n\nadd('es6-array-fill', () => {\n\tif ('fill' in global.Array.prototype) {\n\t\t/* Some versions of Safari do not properly implement this */\n\t\treturn (<any> [ 1 ]).fill(9, Number.POSITIVE_INFINITY)[0] === 1;\n\t}\n\treturn false;\n}, true);\n\nadd('es7-array', () => 'includes' in global.Array.prototype, true);\n\n/* Map */\nadd('es6-map', () => {\n\tif (typeof global.Map === 'function') {\n\t\t/*\n\t\tIE11 and older versions of Safari are missing critical ES6 Map functionality\n\t\tWe wrap this in a try/catch because sometimes the Map constructor exists, but does not\n\t\ttake arguments (iOS 8.4)\n\t\t */\n\t\ttry {\n\t\t\tconst map = new global.Map([ [0, 1] ]);\n\n\t\t\treturn map.has(0) &&\n\t\t\t\ttypeof map.keys === 'function' && has('es6-symbol') &&\n\t\t\t\ttypeof map.values === 'function' &&\n\t\t\t\ttypeof map.entries === 'function';\n\t\t}\n\t\tcatch (e) {\n\t\t\t/* istanbul ignore next: not testing on iOS at the moment */\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn false;\n}, true);\n\n/* Math */\nadd('es6-math', () => {\n\treturn [\n\t\t'clz32',\n\t\t'sign',\n\t\t'log10',\n\t\t'log2',\n\t\t'log1p',\n\t\t'expm1',\n\t\t'cosh',\n\t\t'sinh',\n\t\t'tanh',\n\t\t'acosh',\n\t\t'asinh',\n\t\t'atanh',\n\t\t'trunc',\n\t\t'fround',\n\t\t'cbrt',\n\t\t'hypot'\n\t].every((name) => typeof global.Math[name] === 'function');\n}, true);\n\nadd('es6-math-imul', () => {\n\tif ('imul' in global.Math) {\n\t\t/* Some versions of Safari on ios do not properly implement this */\n\t\treturn (<any> Math).imul(0xffffffff, 5) === -5;\n\t}\n\treturn false;\n}, true);\n\n/* Object */\nadd('es6-object', () => {\n\treturn has('es6-symbol') && [\n\t\t'assign',\n\t\t'is',\n\t\t'getOwnPropertySymbols',\n\t\t'setPrototypeOf'\n\t].every((name) => typeof global.Object[name] === 'function');\n}, true);\n\nadd('es2017-object', () => {\n\treturn [\n\t\t'values',\n\t\t'entries',\n\t\t'getOwnPropertyDescriptors'\n\t].every((name) => typeof global.Object[name] === 'function');\n}, true);\n\n/* Observable */\nadd('es-observable', () => typeof global.Observable !== 'undefined', true);\n\n/* Promise */\nadd('es6-promise', () => typeof global.Promise !== 'undefined' && has('es6-symbol'), true);\n\n/* Set */\nadd('es6-set', () => {\n\tif (typeof global.Set === 'function') {\n\t\t/* IE11 and older versions of Safari are missing critical ES6 Set functionality */\n\t\tconst set = new global.Set([1]);\n\t\treturn set.has(1) && 'keys' in set && typeof set.keys === 'function' && has('es6-symbol');\n\t}\n\treturn false;\n}, true);\n\n/* String */\nadd('es6-string', () => {\n\treturn [ /* static methods */\n\t\t'fromCodePoint'\n\t].every((key) => typeof global.String[key] === 'function') && [ /* instance methods */\n\t\t'codePointAt',\n\t\t'normalize',\n\t\t'repeat',\n\t\t'startsWith',\n\t\t'endsWith',\n\t\t'includes'\n\t].every((key) => typeof global.String.prototype[key] === 'function');\n}, true);\n\nadd('es6-string-raw', () => {\n\tfunction getCallSite(callSite: TemplateStringsArray, ...substitutions: any[]) {\n\t\tconst result = [ ...callSite ];\n\t\t(result as any).raw = callSite.raw;\n\t\treturn result;\n\t}\n\n\tif ('raw' in global.String) {\n\t\tlet b = 1;\n\t\tlet callSite = getCallSite`a\\n${b}`;\n\n\t\t(callSite as any).raw = [ 'a\\\\n' ];\n\t\tconst supportsTrunc = global.String.raw(callSite, 42) === 'a:\\\\n';\n\n\t\treturn supportsTrunc;\n\t}\n\n\treturn false;\n}, true);\n\nadd('es2017-string', () => {\n\treturn [\n\t\t'padStart',\n\t\t'padEnd'\n\t].every((key) => typeof global.String.prototype[key] === 'function');\n}, true);\n\n/* Symbol */\nadd('es6-symbol', () => typeof global.Symbol !== 'undefined' && typeof Symbol() === 'symbol', true);\n\n/* WeakMap */\nadd('es6-weakmap', () => {\n\tif (typeof global.WeakMap !== 'undefined') {\n\t\t/* IE11 and older versions of Safari are missing critical ES6 Map functionality */\n\t\tconst key1 = {};\n\t\tconst key2 = {};\n\t\tconst map = new global.WeakMap([ [ key1, 1 ] ]);\n\t\tObject.freeze(key1);\n\t\treturn map.get(key1) === 1 && map.set(key2, 2) === map && has('es6-symbol');\n\t}\n\treturn false;\n}, true);\n\n/* Miscellaneous features */\nadd('microtasks', () => has('es6-promise') || has('host-node') || has('dom-mutationobserver'), true);\nadd('postmessage', () => {\n\t // If window is undefined, and we have postMessage, it probably means we're in a web worker. Web workers have\n\t // post message but it doesn't work how we expect it to, so it's best just to pretend it doesn't exist.\n\treturn typeof global.window !== 'undefined' && typeof global.postMessage === 'function';\n}, true);\nadd('raf', () => typeof global.requestAnimationFrame === 'function', true);\nadd('setimmediate', () => typeof global.setImmediate !== 'undefined', true);\n\n/* DOM Features */\n\nadd('dom-mutationobserver', () => {\n\tif (has('host-browser') && Boolean(global.MutationObserver || global.WebKitMutationObserver)) {\n\t\t// IE11 has an unreliable MutationObserver implementation where setProperty() does not\n\t\t// generate a mutation event, observers can crash, and the queue does not drain\n\t\t// reliably. The following feature test was adapted from\n\t\t// https://gist.github.com/t10ko/4aceb8c71681fdb275e33efe5e576b14\n\t\tconst example = document.createElement('div');\n\t\t/* tslint:disable-next-line:variable-name */\n\t\tconst HostMutationObserver = global.MutationObserver || global.WebKitMutationObserver;\n\t\tconst observer = new HostMutationObserver(function () {});\n\t\tobserver.observe(example, { attributes: true });\n\n\t\texample.style.setProperty('display', 'block');\n\n\t\treturn Boolean(observer.takeRecords().length);\n\t}\n\treturn false;\n}, true);\n"]}