/*! @dojo/loader@0.1.1-pre - Copyright (c) 2016, The Dojo Foundation. All rights reserved. */
"use strict";!function(args){function forEach(a,b){a&&a.forEach(b)}function mix(a,b,c){if(b)for(var d in b){var e=b[d];!c||"object"!=typeof e||Array.isArray(e)||e instanceof RegExp?a[d]=e:(a[d]||(a[d]={}),mix(a[d],e,!0))}return a}function noop(){}function contextRequire(a,b,c){var d=void 0;if("string"==typeof a){if(d=getModule(a,c),!0!==d.executed&&d.executed!==EXECUTING)if(has("host-node")&&!d.plugin)try{var e=loadNodeModule(d.mid,c);initializeModule(d,[],void 0),d.result=e,d.cjs.setExports(e),d.executed=!0,d.injected=!0}catch(a){throw Error("Attempt to require unloaded module "+d.mid)}else d.plugin&&injectModule(d,void 0);d=d.result}else Array.isArray(a)&&(d=getModuleInformation("*"+ ++uidGenerator),mix(d,{deps:resolveDependencies(a,d,c),def:b||{},gc:!0}),guardCheckComplete(function(){forEach(d?d.deps:[],injectModule.bind(null,d))}),executionQueue.push(d),checkComplete());return d}function createRequire(a){var b=!a&&requireModule||a&&a.require;return!b&&a&&(a.require=b=function(b,c){return contextRequire(b,c,a)},mix(mix(b,requireModule),{toUrl:function(b){return toUrl(b,a)},toAbsMid:function(b){return toAbsMid(b,a)}})),b}function runMapProgram(a,b){if(b)for(var c=0,d=b.length;c<d;++c)if(b[c][2].test(a))return b[c]}function compactPath(a){for(var b,c=a.replace(/\\/g,"/").split("/"),d=[],e="";c.length;)b=c.shift(),".."===b&&d.length&&".."!==e?(d.pop(),e=d[d.length-1]):"."!==b&&d.push(e=b);return d.join("/")}function updateModuleIdFromMap(a,b){a=compactPath(/^\./.test(a)&&b?b.mid+"/../"+a:a);var c=b&&runMapProgram(b.mid,mapPrograms);c=c?c[1]:mapPrograms.star;var d;return(d=runMapProgram(a,c))&&(a=d[1]+a.slice(d[3])),a}function getPluginInformation(a,b,c){var d,e=getModule(b[1],c),f=!!e.load,g=createRequire(c);return f?(d=resolvePluginResourceId(e,b[2],g),a=e.mid+"!"+d):(d=b[2],a=e.mid+"!"+ ++uidGenerator+"!*"),{plugin:e,mid:a,req:g,prid:d,fix:!f}}function getModuleInformation(a,b){var c="",d={},e="",f=Object.keys(config&&config.pkgs||{}).filter(function(b){return 0===(a+"/").indexOf(b+"/")}).sort(function(a,b){return a.length>b.length?-1:1});f.length&&(c=f.shift(),d=config.pkgs[c],a=c+"/"+(e=a.substr(c.length+1)||d.main||"main"));var g=modules[a];if(!g){var h=runMapProgram(a,pathMapPrograms),i=h?h[1]+a.slice(h[3]):c?d.location+e:a;g={pid:c,mid:a,pack:d,url:compactPath((/^(?:\/|\w+:)/.test(i)?"":config.baseUrl)+i+(/\.js(?:\?[^?]*)?$/.test(i)?"":".js"))}}return g}function resolvePluginResourceId(a,b,c){var d=c?c.toAbsMid:void 0;return a.normalize?a.normalize(b,d):d?d(b):""}function getModule(a,b){var c,d=/^(.+?)\!(.*)$/,e=a.match(d);if(e){a=updateModuleIdFromMap(e[1],b)+"!"+e[2]}else a=updateModuleIdFromMap(a,b);var f=a.match(d);return c=f?getPluginInformation(a,f,b):getModuleInformation(a,b),modules[c.mid]||(modules[c.mid]=c)}function toAbsMid(a,b){return a=updateModuleIdFromMap(a,b),getModuleInformation(a,b).mid}function toUrl(a,b){var c=a+"/x";c=updateModuleIdFromMap(c,b);var d=getModuleInformation(c,b),e=d.url;return e.slice(0,e.length-5)}function makeCommonJs(a){return modules[a]={mid:a,injected:!0,executed:!0}}function executeModule(a){if(a.executed===EXECUTING)return has("loader-debug-circular-dependencies")&&-1===a.deps.indexOf(commonJsExportsModule)&&"undefined"!=typeof console&&console.warn("Circular dependency: "+circularTrace.concat(a.mid).join(" -> ")),a.result;if(!a.executed){if(!a.def&&!a.deps)return ABORT_EXECUTION;has("loader-debug-circular-dependencies")&&circularTrace.push(a.mid);var b,c=a.deps;a.executed=EXECUTING;var d=c.map(function(c){return b!==ABORT_EXECUTION&&(b=c===commonJsRequireModule?createRequire(a):c===commonJsExportsModule?a.cjs.exports:c===commonJsModuleModule?a.cjs:executeModule(c)),b});if(b===ABORT_EXECUTION)return a.executed=!1,has("loader-debug-circular-dependencies")&&circularTrace.pop(),ABORT_EXECUTION;var e=a.def;b="function"==typeof e?e.apply(null,d):e,b=a.result=void 0===b&&a.cjs?a.cjs.exports:b,a.executed=!0,executedSomething=!0,a.gc&&(modules[a.mid]=void 0),b&&b.load&&["normalize","load"].forEach(function(c){a[c]=b[c]}),forEach(a.loadQ||[],function(b){var c=resolvePluginResourceId(a,b.prid,b.req),d=a.mid+"!"+c,e=mix(mix({},b),{mid:d,prid:c});modules[d]||injectPlugin(modules[d]=e),b&&b.fix&&b.fix(modules[d]),--waitingCount,modules[b.mid]=void 0}),a.loadQ=void 0,has("loader-debug-circular-dependencies")&&circularTrace.pop()}return a.result}function guardCheckComplete(a){++checkCompleteGuard,a(),--checkCompleteGuard}function checkComplete(){!checkCompleteGuard&&guardCheckComplete(function(){for(var a,b=0;b<executionQueue.length;)a=executionQueue[b],!0===a.executed?executionQueue.splice(b,1):(executedSomething=!1,executeModule(a),executedSomething?b=0:b++)})}function injectPlugin(a){var b=a.plugin,c=function(b){a.result=b,--waitingCount,a.executed=!0,checkComplete()};b&&b.load?b.load(a.prid,a.req,c,config):b&&b.loadQ?b.loadQ.push(a):b&&(b.loadQ=[a],executionQueue.unshift(b),injectModule(a,b))}function injectModule(a,b){if(b||(b=a,a=void 0),b&&b.plugin)injectPlugin(b);else if(b&&!b.injected){var c=void 0,d=function(a){var c=[],d=void 0;moduleDefinitionArguments&&(c=moduleDefinitionArguments[0],d=moduleDefinitionArguments[1]),defineModule(b,c,d),moduleDefinitionArguments=void 0,guardCheckComplete(function(){forEach(b&&b.deps||[],injectModule.bind(null,b))}),checkComplete()};if(++waitingCount,b.injected=!0,c=cache[b.mid])try{return c(),void d()}catch(a){}injectUrl(b.url,d,b,a)}}function resolveDependencies(a,b,c){return a.map(function(a,d){var e=getModule(a,c);return e.fix&&(e.fix=function(a){b.deps[d]=a}),e})}function defineModule(a,b,c){return--waitingCount,initializeModule(a,b,c)}function initializeModule(a,b,c){var d=a,e=void 0;return d&&(e=mix(d,{def:c,deps:resolveDependencies(b,d,d),cjs:{id:d.mid,uri:d.url,exports:d.result={},setExports:function(a){d.cjs.exports=a}}})),e}var globalObject=function(){return"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{}}(),EXECUTING="executing",ABORT_EXECUTION={},cache={},checkCompleteGuard=0,config={baseUrl:"./",packages:[],paths:{},pkgs:{},shim:{},crossOrigin:!1},moduleDefinitionArguments=void 0,executionQueue=[],executedSomething=!1,injectUrl,mapPrograms=[],modules={},pathMapPrograms=[],setGlobals,uidGenerator=0,waitingCount=0,has=function(){var a=Object.create(null),b=globalObject,c=b.document,d=c&&c.createElement("div"),e=function(e){return"function"==typeof a[e]?a[e]=a[e](b,c,d):a[e]};return e.add=function(b,c,d,f){(!(b in a)||f)&&(a[b]=c),d&&e(b)},e}(),requireModule=function(a,b){return contextRequire(a,b)},listenerQueues={},emit=function(a,b){var c=listenerQueues[a],d=c&&c.length;if(d)for(var e=0,f=c.slice(0);e<f.length;e++){var g=f[e];g.apply(null,Array.isArray(b)?b:[b])}return d},reportModuleLoadError=function(a,b,c,d){var e=a?" (parent: "+a.mid+")":"",f="Failed to load module "+b.mid+" from "+c+e,g=mix(Error(f),{src:"dojo/loader",info:{module:b,url:c,parentMid:e,details:d}});if(!emit("error",g))throw g},on=function(a,b){var c=listenerQueues[a]||(listenerQueues[a]=[]);return c.push(b),{remove:function(){c.splice(c.indexOf(b),1)}}};requireModule.has=has,requireModule.on=on,has.add("host-browser","undefined"!=typeof document&&"undefined"!=typeof location),has.add("host-node","object"==typeof process&&process.versions&&process.versions.node),has.add("host-nashorn","function"==typeof load&&"undefined"!=typeof Packages),has.add("host-web-worker",!has("host-browser")&&"undefined"!=typeof importScripts),has.add("debug",!0),has.add("loader-configurable",!0),has.add("loader-config-attribute",!0),has("loader-configurable")&&(requireModule.config=function(a){function b(a){var c=[];if(a)for(var d in a){var e=a[d],f="object"==typeof e,g={0:d,1:f?b(e):e,2:RegExp("^"+d.replace(/[-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")+"(?:/|$)"),3:d.length};c.push(g),f&&"*"===d&&(c.star=g[1])}return c.sort(function(a,b){return b[3]-a[3]}),c}a.baseUrl&&(a.baseUrl=a.baseUrl.replace(/\/*$/,"/"));var c={paths:!0,bundles:!0,config:!0,map:!0};for(var d in a){var e=a[d];c[d]?(config[d]||(config[d]={}),mix(config[d],e,!0)):config[d]=e}forEach(a.packages||[],function(a){"string"==typeof a&&(a={name:a,location:a}),null!=a.location&&(a.location=a.location.replace(/\/*$/,"/")),config&&config.pkgs&&a.name&&(config.pkgs[a.name]=a)}),mapPrograms=b(config.map),a.paths&&(pathMapPrograms=b(a.paths)),config.shim&&Object.keys(config.shim).forEach(function(a){var b,c=config.shim[a];b=Array.isArray(c)?{deps:c}:c,define(a,b.deps||[],function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var d,e=b.exports;if(e&&(d=globalObject,e.split(".").forEach(function(a){if(!(a in d))throw Error("Tried to find "+e+" but it did not exist");d=d[a]})),b.init){var f=b.init.apply(b,a);void 0!==f&&(d=f)}return d})})},has("loader-config-attribute")&&has("host-browser")&&Array.prototype.slice.call(document.getElementsByTagName("script"),0).forEach(function(a){if(a.hasAttribute("data-loader-config")){var b=a.getAttribute("data-loader-config"),c=null;try{c=JSON.parse("{ "+b+" }")}catch(a){console.error("Unable to parse data-loader-config, "+b),console.error(a)}null!==c&&requireModule.config(c)}}));var loadNodeModule=noop,commonJsRequireModule=makeCommonJs("require"),commonJsExportsModule=makeCommonJs("exports"),commonJsModuleModule=makeCommonJs("module"),circularTrace;has.add("loader-debug-circular-dependencies",!0),has("loader-debug-circular-dependencies")&&(circularTrace=[]),has.add("function-bind",!!Function.prototype.bind),has("function-bind")||(injectModule.bind=function(a){var b=Array.prototype.slice,c=b.call(arguments,1);return function(){return injectModule.apply(a,c.concat(b.call(arguments,0)))}});var globalObjectGlobals=function(a,b){globalObject.require=a,globalObject.define=b};if(has("host-node")){loadNodeModule=function(a,b){var c,d=require("module");if(d._findPath&&d._nodeModulePaths){var e=d._findPath(a,d._nodeModulePaths(toUrl(".",b)));!1!==e&&(a=e)}globalObject.define=void 0;try{requireModule&&requireModule.nodeRequire&&(c=requireModule.nodeRequire(a))}catch(a){throw a}finally{globalObject.define=define}return c};var vm_1=require("vm"),fs_1=require("fs");requireModule.nodeRequire=require,injectUrl=function(a,b,c,d){fs_1.readFile(a,"utf8",function(e,f){function g(){try{return loadNodeModule(c.mid,d)}catch(b){reportModuleLoadError(d,c,a,b.message)}}if(e)moduleDefinitionArguments=[[],g];else{var h=globalObject.module;globalObject.module=void 0;try{vm_1.runInThisContext(f,a)}catch(e){reportModuleLoadError(d,c,a,e.message)}finally{globalObject.module=h}}b()})},setGlobals=function(a,b){module.exports=globalObject.require=a,globalObject.define=b}}else if(has("host-browser"))injectUrl=function(a,b,c,d){var e=document.createElement("script"),f=function(f){document.head.removeChild(e),"load"===f.type?b():reportModuleLoadError(d,c,a)};e.addEventListener("load",f,!1),e.addEventListener("error",f,!1),!1!==config.crossOrigin&&(e.crossOrigin=config.crossOrigin),e.charset="utf-8",e.src=a,document.head.appendChild(e)},setGlobals=globalObjectGlobals;else if(has("host-nashorn"))injectUrl=function(a,b,c,d){load(a),b()},setGlobals=globalObjectGlobals;else{if(!has("host-web-worker"))throw Error("Unsupported platform");injectUrl=function(a,b,c,d){try{importScripts(a)}catch(b){reportModuleLoadError(d,c,a)}b()},setGlobals=globalObjectGlobals}has.add("loader-debug-internals",!0),has("loader-debug-internals")&&(requireModule.inspect=function(name){return eval(name)}),has.add("loader-undef",!0),has("loader-undef")&&(requireModule.undef=function(a,b){var c=modules[a],d=function(a){a!==commonJsRequireModule&&a!==commonJsModuleModule&&a!==commonJsExportsModule&&(a.deps&&forEach(a.deps,d),modules[a.mid]=void 0)};c&&(b&&c.deps&&forEach(c.deps,d),delete modules[c.mid],delete cache[c.mid])}),mix(requireModule,{toAbsMid:toAbsMid,toUrl:toUrl,cache:function(a){var b;for(var c in a)b=a[c],cache[getModuleInformation(c,void 0).mid]=b}}),Object.defineProperty(requireModule,"baseUrl",{get:function(){return config.baseUrl},enumerable:!0}),has.add("loader-cjs-wrapping",!0);var comments,requireCall;has("loader-cjs-wrapping")&&(comments=/\/\*[\s\S]*?\*\/|\/\/.*$/gm,requireCall=/require\s*\(\s*(["'])(.*?[^\\])\1\s*\)/g),has.add("loader-explicit-mid",!0);var define=mix(function(a,b){var c;if(has("loader-explicit-mid")&&arguments.length>1&&"string"==typeof a){var d=a;if(3===arguments.length?(a=b,b=arguments[2]):a=[],null!=d){var e=getModule(d);b&&(c=b,b=function(){return e.executed=!0,e.result=c.apply?c.apply(null,arguments):c}),e.injected=!0,defineModule(e,a,b),guardCheckComplete(function(){forEach(e.deps,injectModule.bind(null,e))})}}if(1===arguments.length)if(has("loader-cjs-wrapping")&&"function"==typeof a)c=a,a=["require","exports","module"],(""+c).replace(comments,"").replace(requireCall,function(){return a.push(arguments[2]),arguments[0]}),b=function(b,d,e){var f=e.id,g=c.apply(null,arguments);if(f!==e.id){var h=getModule(e.id);defineModule(h,a,void 0),h.injected=!0,h.executed=!0,h.result=e.exports=g||e.exports}return g};else if(!Array.isArray(a)){var f=a;a=[],b=function(){return f}}moduleDefinitionArguments=[a,b]},{amd:{vendor:"dojotoolkit.org"}});setGlobals(requireModule,define),has("host-nashorn")&&args&&args[0]&&load(args[0])}("undefined"!=typeof Packages?Array.prototype.slice.call(arguments,0):[]);
//# sourceMappingURL=loader.min.js.map