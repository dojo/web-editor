{"version":3,"file":"TitlePane.js","sourceRoot":"","sources":["TitlePane.ts"],"names":[],"mappings":"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","sourcesContent":["import uuid from '@dojo/core/uuid';\nimport { DNode } from '@dojo/widget-core/interfaces';\nimport { theme, ThemedMixin, ThemedProperties } from '@dojo/widget-core/mixins/Themed';\nimport { v } from '@dojo/widget-core/d';\nimport { WidgetBase } from '@dojo/widget-core/WidgetBase';\n\nimport * as css from './styles/titlePane.m.css';\nimport * as iconCss from '../common/styles/icons.m.css';\n\n/**\n * @type TitlePaneProperties\n *\n * Properties that can be set on a TitlePane component\n *\n * @property closeable          If false the pane will not collapse in response to clicking the title\n * @property headingLevel       'aria-level' for the title's DOM node\n * @property onRequestClose     Called when the title of an open pane is clicked\n * @property onRequestOpen      Called when the title of a closed pane is clicked\n * @property open               If true the pane is opened and content is visible\n * @property title              Title to display above the content\n */\nexport interface TitlePaneProperties extends ThemedProperties {\n\tcloseable?: boolean;\n\theadingLevel?: number;\n\tonRequestClose?(key: string | number | undefined): void;\n\tonRequestOpen?(key: string | number | undefined): void;\n\topen?: boolean;\n\ttitle: string;\n};\n\nexport const TitlePaneBase = ThemedMixin(WidgetBase);\n\n@theme(css)\n@theme(iconCss)\nexport default class TitlePane extends TitlePaneBase<TitlePaneProperties> {\n\tprivate _contentId = uuid();\n\tprivate _titleId = uuid();\n\n\tprivate _afterRender(element: HTMLElement) {\n\t\t// Conditionally adjust top margin. Done manually instead of through Maquette\n\t\t// so the underlying DOM is accessible, as we need to know the content height.\n\t\t// Put in a rAF to push this operation to the next tick, otherwise\n\t\t// element.offsetHeight can be incorrect (e.g. before styling is applied)\n\t\t// Note that this will go away when meta support is added to widget-core\n\t\trequestAnimationFrame(() => {\n\t\t\tconst { open = true } = this.properties;\n\t\t\tconst height = element.offsetHeight;\n\t\t\telement.style.marginTop = open ? '0px' : `-${ height }px`;\n\t\t});\n\t}\n\n\tprivate _onTitleClick() {\n\t\tthis._toggle();\n\t}\n\n\tprivate _toggle() {\n\t\tconst {\n\t\t\tcloseable = true,\n\t\t\tkey,\n\t\t\tonRequestClose,\n\t\t\tonRequestOpen,\n\t\t\topen = true\n\t\t} = this.properties;\n\n\t\tif (!closeable) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (open) {\n\t\t\tonRequestClose && onRequestClose(key);\n\t\t}\n\t\telse {\n\t\t\tonRequestOpen && onRequestOpen(key);\n\t\t}\n\t}\n\n\tprotected onElementCreated(element: HTMLElement, key: string) {\n\t\tkey === 'content' && this._afterRender(element);\n\t}\n\n\tprotected onElementUpdated(element: HTMLElement, key: string) {\n\t\tkey === 'content' && this._afterRender(element);\n\t}\n\n\tprotected getButtonContent(): DNode {\n\t\treturn this.properties.title;\n\t}\n\n\tprotected getFixedModifierClasses(): (string | null)[] {\n\t\tconst { closeable = true } = this.properties;\n\t\treturn [\n\t\t\tcloseable ? css.closeableFixed : null\n\t\t];\n\t}\n\n\tprotected getModifierClasses(): (string | null)[] {\n\t\tconst { closeable = true } = this.properties;\n\t\treturn [\n\t\t\tcloseable ? css.closeable : null\n\t\t];\n\t}\n\n\tprotected getPaneContent(): DNode[] {\n\t\treturn this.children;\n\t}\n\n\tprotected renderExpandIcon(): DNode {\n\t\tconst { open = true } = this.properties;\n\t\treturn v('i', {\n\t\t\tclasses: this.theme([\n\t\t\t\tcss.arrow,\n\t\t\t\ticonCss.icon,\n\t\t\t\topen ? iconCss.downIcon : iconCss.rightIcon\n\t\t\t]),\n\t\t\trole: 'presentation',\n\t\t\t'aria-hidden': 'true'\n\t\t});\n\t}\n\n\trender(): DNode {\n\t\tconst {\n\t\t\tcloseable = true,\n\t\t\theadingLevel,\n\t\t\topen = true\n\t\t} = this.properties;\n\n\t\treturn v('div', {\n\t\t\tclasses: [ ...this.theme([\n\t\t\t\tcss.root,\n\t\t\t\topen ? css.open : null\n\t\t\t]), css.rootFixed ]\n\t\t}, [\n\t\t\tv('div', {\n\t\t\t\t'aria-level': headingLevel ? String(headingLevel) : null,\n\t\t\t\tclasses: [ ...this.theme([ css.title, ...this.getModifierClasses() ]), css.titleFixed, ...this.getFixedModifierClasses() ],\n\t\t\t\trole: 'heading'\n\t\t\t}, [\n\t\t\t\tv('button', {\n\t\t\t\t\t'aria-controls': this._contentId,\n\t\t\t\t\t'aria-expanded': String(open),\n\t\t\t\t\tdisabled: !closeable,\n\t\t\t\t\tclasses: this.theme(css.titleButton),\n\t\t\t\t\tid: this._titleId,\n\t\t\t\t\tonclick: this._onTitleClick\n\t\t\t\t}, [\n\t\t\t\t\tthis.renderExpandIcon(),\n\t\t\t\t\tthis.getButtonContent()\n\t\t\t\t])\n\t\t\t]),\n\t\t\tv('div', {\n\t\t\t\t'aria-hidden': open ? null : 'true',\n\t\t\t\t'aria-labelledby': this._titleId,\n\t\t\t\tclasses: this.theme(css.content),\n\t\t\t\tid: this._contentId,\n\t\t\t\tkey: 'content'\n\t\t\t}, this.getPaneContent())\n\t\t]);\n\t}\n}\n"]}