{"version":3,"file":"SlidePane.js","sourceRoot":"","sources":["SlidePane.ts"],"names":[],"mappings":"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","sourcesContent":["import { DNode } from '@dojo/widget-core/interfaces';\nimport { ThemedMixin, ThemedProperties, theme } from '@dojo/widget-core/mixins/Themed';\nimport { v } from '@dojo/widget-core/d';\nimport { WidgetBase } from '@dojo/widget-core/WidgetBase';\nimport * as animations from '../common/styles/animations.m.css';\nimport * as css from './styles/slidePane.m.css';\nimport * as iconCss from '../common/styles/icons.m.css';\nimport uuid from '@dojo/core/uuid';\n\n/**\n * Enum for left / right alignment\n */\nexport const enum Align {\n\tbottom = 'bottom',\n\tleft = 'left',\n\tright = 'right',\n\ttop = 'top'\n};\n\n/**\n * @type SlidePaneProperties\n *\n * Properties that can be set on a SlidePane component\n *\n * @property align            The position of the pane on the screen\n * @property closeText        Hidden text used by screen readers to display for the close button\n * @property onOpen           Called when the pane opens\n * @property onRequestClose   Called when the pane is swiped closed or the underlay is clicked or tapped\n * @property open             Determines whether the pane is open or closed\n * @property title            Title to display in the pane\n * @property underlay         Determines whether a semi-transparent background shows behind the pane\n * @property width            Width of the pane in pixels\n */\nexport interface SlidePaneProperties extends ThemedProperties {\n\talign?: Align;\n\tcloseText?: string;\n\tonOpen?(): void;\n\tonRequestClose?(): void;\n\topen?: boolean;\n\ttitle?: string;\n\tunderlay?: boolean;\n\twidth?: number;\n};\n\n/**\n * The default width of the slide pane\n */\nconst DEFAULT_WIDTH = 320;\n\n/**\n * The minimum swipe delta in px required to be counted as a swipe and not a touch / click\n */\nconst SWIPE_THRESHOLD = 5;\n\nconst enum Plane {\n\tx,\n\ty\n};\n\nexport const SlidePaneBase = ThemedMixin(WidgetBase);\n\n@theme(css)\n@theme(iconCss)\nexport default class SlidePane extends SlidePaneBase<SlidePaneProperties> {\n\tprivate _content: HTMLElement;\n\tprivate _initialPosition: number;\n\tprivate _slideIn: boolean;\n\tprivate _swiping: boolean;\n\tprivate _titleId = uuid();\n\tprivate _transform: number;\n\tprivate _wasOpen: boolean;\n\n\tprivate get plane() {\n\t\tconst { align = Align.left } = this.properties;\n\t\treturn align === Align.left || align === Align.right ? Plane.x : Plane.y;\n\t}\n\n\tprivate _getDelta(event: MouseEvent & TouchEvent, eventType: string) {\n\t\tconst { align = Align.left } = this.properties;\n\n\t\tif (this.plane === Plane.x) {\n\t\t\tconst currentX = event.type === eventType ? event.changedTouches[0].screenX : event.pageX;\n\t\t\treturn align === Align.right ? currentX - this._initialPosition : this._initialPosition - currentX;\n\t\t}\n\t\telse {\n\t\t\tconst currentY = event.type === eventType ? event.changedTouches[0].screenY : event.pageY;\n\t\t\treturn align === Align.bottom ? currentY - this._initialPosition : this._initialPosition - currentY;\n\t\t}\n\t}\n\n\tprivate _onCloseClick() {\n\t\tconst { onRequestClose } = this.properties;\n\t\tonRequestClose && onRequestClose();\n\t}\n\n\tprivate _onSwipeStart(event: MouseEvent & TouchEvent) {\n\t\tthis._swiping = true;\n\t\t// Cache initial pointer position\n\t\tif (this.plane === Plane.x) {\n\t\t\tthis._initialPosition = event.type === 'touchstart' ? event.changedTouches[0].screenX : event.pageX;\n\t\t}\n\t\telse {\n\t\t\tthis._initialPosition = event.type === 'touchstart' ? event.changedTouches[0].screenY : event.pageY;\n\t\t}\n\n\t\t// Clear out the last transform applied\n\t\tthis._transform = 0;\n\t}\n\n\tprivate _onSwipeMove(event: MouseEvent & TouchEvent) {\n\t\t// Ignore mouse movement when not clicking\n\t\tif (!this._swiping) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst {\n\t\t\talign = Align.left,\n\t\t\twidth = DEFAULT_WIDTH\n\t\t} = this.properties;\n\n\t\tconst delta = this._getDelta(event, 'touchmove');\n\n\t\t// Transform to apply\n\t\tthis._transform = 100 * delta / width;\n\n\t\t// Prevent pane from sliding past screen edge\n\t\tif (delta <= 0) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Move the pane\n\t\tif (this.plane === Plane.x) {\n\t\t\tthis._content.style.transform = `translateX(${ align === Align.left ? '-' : '' }${ this._transform }%)`;\n\t\t}\n\t\telse {\n\t\t\tthis._content.style.transform = `translateY(${ align === Align.top ? '-' : '' }${ this._transform }%)`;\n\t\t}\n\t}\n\n\tprivate _onSwipeEnd(event: MouseEvent & TouchEvent) {\n\t\tthis._swiping = false;\n\n\t\tconst {\n\t\t\tonRequestClose,\n\t\t\twidth = DEFAULT_WIDTH\n\t\t} = this.properties;\n\n\t\tconst delta = this._getDelta(event, 'touchend');\n\n\t\t// If the pane was swiped far enough to close\n\t\tif (delta > width / 2) {\n\t\t\t// Cache the transform to apply on next render\n\t\t\tthis._transform = 100 * delta / width;\n\t\t\tonRequestClose && onRequestClose();\n\t\t}\n\t\t// If the underlay was clicked\n\t\telse if (Math.abs(delta) < SWIPE_THRESHOLD && (!this._content || !this._content.contains(event.target as HTMLElement))) {\n\t\t\tonRequestClose && onRequestClose();\n\t\t}\n\t\t// If pane was not swiped far enough to close\n\t\telse if (delta > 0) {\n\t\t\t// Animate the pane back open\n\t\t\tthis._slideIn = true;\n\t\t\tthis.invalidate();\n\t\t}\n\t}\n\n\tprotected onElementCreated(element: HTMLElement, key: string) {\n\t\tif (key === 'content') {\n\t\t\telement.addEventListener('transitionend', this.invalidate.bind(this));\n\t\t\tthis._content = element;\n\t\t}\n\t}\n\n\tprotected getContent(): DNode {\n\t\treturn v('div', { classes: this.theme(css.content) }, this.children);\n\t}\n\n\tprotected getStyles(): { [key: string]: string | null } {\n\t\tconst {\n\t\t\talign = Align.left,\n\t\t\topen = false,\n\t\t\twidth = DEFAULT_WIDTH\n\t\t} = this.properties;\n\n\t\tlet translate = '';\n\t\tconst translateAxis = this.plane === Plane.x ? 'X' : 'Y';\n\n\t\t// If pane is closing because of swipe\n\t\tif (!open && this._wasOpen && this._transform) {\n\t\t\ttranslate = align === Align.left || align === Align.top ? `-${this._transform}` : `${this._transform}`;\n\t\t}\n\n\t\treturn {\n\t\t\ttransform: translate ? `translate${translateAxis}(${translate}%)` : '',\n\t\t\twidth: this.plane === Plane.x ? `${ width }px` : null,\n\t\t\theight: this.plane === Plane.y ? `${ width }px` : null\n\t\t};\n\t}\n\n\tprotected getFixedModifierClasses(): (string | null)[] {\n\t\tconst {\n\t\t\talign = Align.left,\n\t\t\topen = false\n\t\t} = this.properties;\n\t\tconst alignCss: {[key: string]: any} = css;\n\n\t\treturn [\n\t\t\topen ? css.openFixed : null,\n\t\t\talignCss[`${align}Fixed`],\n\t\t\tthis._slideIn || (open && !this._wasOpen) ? css.slideInFixed : null,\n\t\t\t!open && this._wasOpen ? css.slideOutFixed : null\n\t\t];\n\t}\n\n\tprotected getModifierClasses(): (string | null)[] {\n\t\tconst {\n\t\t\talign = Align.left,\n\t\t\topen = false\n\t\t} = this.properties;\n\t\tconst alignCss: {[key: string]: any} = css;\n\n\t\treturn [\n\t\t\talignCss[align],\n\t\t\topen ? css.open : null,\n\t\t\tthis._slideIn || (open && !this._wasOpen) ? css.slideIn : null,\n\t\t\t!open && this._wasOpen ? css.slideOut : null\n\t\t];\n\t}\n\n\tprotected renderCloseIcon(): DNode {\n\t\treturn v('i', { classes: this.theme([ iconCss.icon, iconCss.closeIcon ]),\n\t\t\trole: 'presentation', 'aria-hidden': 'true'\n\t\t});\n\t}\n\n\tprotected renderTitle(): DNode {\n\t\tconst { title = '' } = this.properties;\n\t\treturn v('div', { id: this._titleId }, [ title ]);\n\t}\n\n\tprotected renderUnderlay(): DNode {\n\t\tconst { underlay = false } = this.properties;\n\t\treturn v('div', {\n\t\t\tclasses: [ this.theme(underlay ? css.underlayVisible : null), css.underlay ],\n\t\t\tenterAnimation: animations.fadeIn,\n\t\t\texitAnimation: animations.fadeOut,\n\t\t\tkey: 'underlay'\n\t\t});\n\t}\n\n\trender(): DNode {\n\t\tconst {\n\t\t\tcloseText = 'close pane',\n\t\t\tonOpen,\n\t\t\topen = false,\n\t\t\ttitle = ''\n\t\t} = this.properties;\n\n\t\tconst contentStyles = this.getStyles();\n\t\tconst contentClasses = this.getModifierClasses();\n\t\tconst fixedContentClasses = this.getFixedModifierClasses();\n\n\t\tif (this._slideIn && this._content) {\n\t\t\tthis._content.style.transform = '';\n\t\t}\n\n\t\topen && !this._wasOpen && onOpen && onOpen();\n\t\tthis._wasOpen = open;\n\t\tthis._slideIn = false;\n\n\t\treturn v('div', {\n\t\t\t'aria-labelledby': this._titleId,\n\t\t\tclasses: this.theme(css.root),\n\t\t\tonmousedown: this._onSwipeStart,\n\t\t\tonmousemove: this._onSwipeMove,\n\t\t\tonmouseup: this._onSwipeEnd,\n\t\t\tontouchend: this._onSwipeEnd,\n\t\t\tontouchmove: this._onSwipeMove,\n\t\t\tontouchstart: this._onSwipeStart\n\t\t}, [\n\t\t\topen ? this.renderUnderlay() : null,\n\t\t\tv('div', {\n\t\t\t\tkey: 'content',\n\t\t\t\tclasses: [ ...this.theme([ css.pane, ...contentClasses ]), css.paneFixed, ...fixedContentClasses ],\n\t\t\t\tstyles: contentStyles\n\t\t\t}, [\n\t\t\t\ttitle ? v('div', {\n\t\t\t\t\tclasses: this.theme(css.title),\n\t\t\t\t\tkey: 'title'\n\t\t\t\t}, [\n\t\t\t\t\tthis.renderTitle(),\n\t\t\t\t\tv('button', {\n\t\t\t\t\t\tclasses: this.theme(css.close),\n\t\t\t\t\t\tonclick: this._onCloseClick\n\t\t\t\t\t}, [\n\t\t\t\t\t\tcloseText,\n\t\t\t\t\t\tthis.renderCloseIcon()\n\t\t\t\t\t])\n\t\t\t\t]) : null,\n\t\t\t\tthis.getContent()\n\t\t\t])\n\t\t]);\n\t}\n}\n"]}