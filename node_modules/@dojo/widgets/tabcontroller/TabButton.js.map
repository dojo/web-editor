{"version":3,"file":"TabButton.js","sourceRoot":"","sources":["TabButton.ts"],"names":[],"mappings":"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","sourcesContent":["import { DNode } from '@dojo/widget-core/interfaces';\nimport { ThemedMixin, ThemedProperties, theme } from '@dojo/widget-core/mixins/Themed';\nimport { v } from '@dojo/widget-core/d';\nimport { WidgetBase } from '@dojo/widget-core/WidgetBase';\nimport { Keys } from '../common/util';\n\nimport * as css from './styles/tabController.m.css';\n\n/**\n * @type TabButtonProperties\n *\n * Properties that can be set on a TabButton component\n *\n * @property active             Determines whether this tab button is active\n * @property callFocus          Used to immediately call focus on the cell\n * @property closeable          Determines whether this tab can be closed\n * @property controls           ID of the DOM element this tab button controls\n * @property disabled           Determines whether this tab can become active\n * @property id                 ID of this tab button DOM element\n * @property index              The position of this tab button\n * @property onClick            Called when this tab button is clicked\n * @property onCloseClick       Called when this tab button's close icon is clicked\n * @property onDownArrowPress   Called when the down arrow button is pressed\n * @property onEndPress         Called when the end button is pressed\n * @property onFocusCalled      Callback function when the cell receives focus\n * @property onHomePress        Called when the home button is pressed\n * @property onLeftArrowPress   Called when the left arrow button is pressed\n * @property onRightArrowPress  Called when the right arrow button is pressed\n * @property onUpArrowPress     Called when the up arrow button is pressed\n */\nexport interface TabButtonProperties extends ThemedProperties {\n\tactive?: boolean;\n\tcallFocus?: boolean;\n\tcloseable?: boolean;\n\tcontrols: string;\n\tdisabled?: boolean;\n\tid: string;\n\tindex: number;\n\tonClick?: (index: number) => void;\n\tonCloseClick?: (index: number) => void;\n\tonDownArrowPress?: () => void;\n\tonEndPress?: () => void;\n\tonFocusCalled?: () => void;\n\tonHomePress?: () => void;\n\tonLeftArrowPress?: () => void;\n\tonRightArrowPress?: () => void;\n\tonUpArrowPress?: () => void;\n};\n\nexport const TabButtonBase = ThemedMixin(WidgetBase);\n\n@theme(css)\nexport default class TabButton extends TabButtonBase<TabButtonProperties> {\n\tprivate _onClick() {\n\t\tconst {\n\t\t\tdisabled,\n\t\t\tindex,\n\t\t\tonClick\n\t\t} = this.properties;\n\n\t\t!disabled && onClick && onClick(index);\n\t}\n\n\tprivate _onCloseClick(event: MouseEvent) {\n\t\tconst {\n\t\t\tindex,\n\t\t\tonCloseClick\n\t\t} = this.properties;\n\n\t\tevent.stopPropagation();\n\t\tonCloseClick && onCloseClick(index);\n\t}\n\n\tprivate _onKeyDown(event: KeyboardEvent) {\n\t\tconst {\n\t\t\tcloseable,\n\t\t\tdisabled,\n\t\t\tindex,\n\t\t\tonCloseClick,\n\t\t\tonDownArrowPress,\n\t\t\tonEndPress,\n\t\t\tonHomePress,\n\t\t\tonLeftArrowPress,\n\t\t\tonRightArrowPress,\n\t\t\tonUpArrowPress\n\t\t} = this.properties;\n\n\t\tif (disabled) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Accessibility\n\t\tswitch (event.which) {\n\t\t\t// Escape\n\t\t\tcase Keys.Escape:\n\t\t\t\tcloseable && onCloseClick && onCloseClick(index);\n\t\t\t\tbreak;\n\t\t\t// Left arrow\n\t\t\tcase Keys.Left:\n\t\t\t\tonLeftArrowPress && onLeftArrowPress();\n\t\t\t\tbreak;\n\t\t\t// Right arrow\n\t\t\tcase Keys.Right:\n\t\t\t\tonRightArrowPress && onRightArrowPress();\n\t\t\t\tbreak;\n\t\t\t// Up arrow\n\t\t\tcase Keys.Up:\n\t\t\t\tonUpArrowPress && onUpArrowPress();\n\t\t\t\tbreak;\n\t\t\t// Down arrow\n\t\t\tcase Keys.Down:\n\t\t\t\tonDownArrowPress && onDownArrowPress();\n\t\t\t\tbreak;\n\t\t\t// Home\n\t\t\tcase Keys.Home:\n\t\t\t\tonHomePress && onHomePress();\n\t\t\t\tbreak;\n\t\t\t// End\n\t\t\tcase Keys.End:\n\t\t\t\tonEndPress && onEndPress();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tprivate _callFocus(element: HTMLElement) {\n\t\tconst { callFocus, onFocusCalled } = this.properties;\n\t\tif (callFocus) {\n\t\t\telement.focus();\n\t\t\tonFocusCalled && onFocusCalled();\n\t\t}\n\t}\n\n\tprotected getContent(): DNode[] {\n\t\tconst { active, closeable } = this.properties;\n\n\t\treturn [\n\t\t\t...this.children,\n\t\t\tcloseable ? v('button', {\n\t\t\t\ttabIndex: active ? 0 : -1,\n\t\t\t\tclasses: this.theme(css.close),\n\t\t\t\tinnerHTML: 'close tab',\n\t\t\t\tonclick: this._onCloseClick\n\t\t\t}) : null\n\t\t];\n\t}\n\n\tprotected getModifierClasses(): (string | null)[] {\n\t\tconst { active, disabled } = this.properties;\n\t\treturn [\n\t\t\tactive ? css.activeTabButton : null,\n\t\t\tdisabled ? css.disabledTabButton : null\n\t\t];\n\t}\n\n\tprotected onElementCreated(element: HTMLElement, key: string) {\n\t\tkey === 'tab-button' && this._callFocus(element);\n\t}\n\n\tprotected onElementUpdated(element: HTMLElement, key: string) {\n\t\tkey === 'tab-button' && this._callFocus(element);\n\t}\n\n\trender(): DNode {\n\t\tconst {\n\t\t\tactive,\n\t\t\tcontrols,\n\t\t\tdisabled,\n\t\t\tid\n\t\t} = this.properties;\n\n\t\treturn v('div', {\n\t\t\t'aria-controls': controls,\n\t\t\t'aria-disabled': disabled ? 'true' : 'false',\n\t\t\t'aria-selected': active ? 'true' : 'false',\n\t\t\tclasses: this.theme([ css.tabButton, ...this.getModifierClasses() ]),\n\t\t\tid,\n\t\t\tkey: 'tab-button',\n\t\t\tonclick: this._onClick,\n\t\t\tonkeydown: this._onKeyDown,\n\t\t\trole: 'tab',\n\t\t\ttabIndex: active ? 0 : -1\n\t\t}, this.getContent());\n\t}\n}\n"]}