{"version":3,"file":"AccordionPane.js","sourceRoot":"","sources":["AccordionPane.ts"],"names":[],"mappings":";;;;;;;;;;;;IAAA,4CAA0C;IAC1C,wCAAyC;IAEzC,0CAA4C;IAC5C,0DAAuF;IACvF,yCAAwC;IACxC,2DAA0D;IAI1D,kDAAoD;IAenD,CAAC;IAEW,QAAA,iBAAiB,GAAG,oBAAW,CAAC,uBAAU,CAAC,CAAC;IAGzD;QAA2C,yCAA4D;QAAvG;;QAwCA,CAAC;QAvCQ,uCAAe,GAAvB,UAAwB,KAAuB,EAAE,YAAgD,EAAE,QAA+B;YAAlI,iBAKC;YAJA,IAAM,gBAAgB,GAAG,KAAK,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC;YACxD,IAAM,QAAQ,GAAG,cAAQ,QAAQ,CAAC,IAAI,CAAC,KAAI,EAAE,KAAI,KAAK,CAAC,UAAU,CAAC,GAAM,CAAC,CAAC,CAAC,CAAC,CAAC;YAE7E,MAAM,CAAC,gBAAgB,CAAC,CAAC,CAAC,cAAK,CAAC,gBAAgB,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC;QACxE,CAAC;QAES,sCAAc,GAAxB,UAAyB,GAAW;YAC3B,IAAA,+CAAc,CAAqB;YAC3C,cAAc,IAAI,cAAc,CAAC,GAAG,CAAC,CAAC;QACvC,CAAC;QAES,qCAAa,GAAvB,UAAwB,GAAW;YAC1B,IAAA,6CAAa,CAAqB;YAC1C,aAAa,IAAI,aAAa,CAAC,GAAG,CAAC,CAAC;QACrC,CAAC;QAES,sCAAc,GAAxB;YAAA,iBAiBC;YAhBM,IAAA,oBAGa,EAFlB,gBAAa,EAAb,kCAAa,EACb,gBAAK,CACc;YAEpB,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAC,KAAK,IAAK,OAAA,KAAK,EAAL,CAAK,CAAC,CAAC,GAAG,CAAC,UAAA,KAAK;gBACtD,mEAAmE;gBACnE,aAAM,CAAC,KAAM,CAAC,UAAU,EAAE;oBACzB,cAAc,EAAE,KAAI,CAAC,eAAe,CAAC,KAAM,EAAE,gBAAgB,EAAE,KAAI,CAAC,cAAc,CAAC;oBACnF,aAAa,EAAE,KAAI,CAAC,eAAe,CAAC,KAAM,EAAE,eAAe,EAAE,KAAI,CAAC,aAAa,CAAC;oBAChF,IAAI,EAAE,gBAAQ,CAAC,QAAQ,EAAE,KAAM,CAAC,UAAU,CAAC,GAAG,CAAC;oBAC/C,KAAK,OAAA;iBACL,CAAC,CAAC;gBAEH,MAAM,CAAC,KAAK,CAAC;YACd,CAAC,CAAC,CAAC;QACJ,CAAC;QAED,8BAAM,GAAN;YACC,MAAM,CAAC,KAAC,CAAC,KAAK,EAAE,EAAE,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC;QAC3E,CAAC;QAvCmB,aAAa;YADjC,cAAK,CAAC,GAAG,CAAC;WACU,aAAa,CAwCjC;QAAD,oBAAC;KAAA,AAxCD,CAA2C,yBAAiB,GAwC3D;sBAxCoB,aAAa","sourcesContent":["import { after } from '@dojo/core/aspect';\nimport { assign } from '@dojo/core/lang';\nimport { DNode, WNode } from '@dojo/widget-core/interfaces';\nimport { includes } from '@dojo/shim/array';\nimport { ThemedMixin, ThemedProperties, theme } from '@dojo/widget-core/mixins/Themed';\nimport { v } from '@dojo/widget-core/d';\nimport { WidgetBase } from '@dojo/widget-core/WidgetBase';\n\nimport TitlePane from '../titlepane/TitlePane';\n\nimport * as css from './styles/accordionPane.m.css';\n\n/**\n * @type AccordionPaneProperties\n *\n * Properties that can be set on AccordionPane components\n *\n * @property onRequestClose   Called when the title of an open pane is clicked\n * @property onRequestOpen    Called when the title of a closed pane is clicked\n * @property openKeys         Array of TitlePane keys indicating which panes should be open\n */\nexport interface AccordionPaneProperties extends ThemedProperties {\n\tonRequestClose?(key: string): void;\n\tonRequestOpen?(key: string): void;\n\topenKeys?: string[];\n};\n\nexport const AccordionPaneBase = ThemedMixin(WidgetBase);\n\n@theme(css)\nexport default class AccordionPane extends AccordionPaneBase<AccordionPaneProperties, WNode<TitlePane>> {\n\tprivate _assignCallback(child: WNode<TitlePane>, functionName: 'onRequestClose' | 'onRequestOpen', callback: (key: string) => void) {\n\t\tconst existingProperty = child.properties[functionName];\n\t\tconst property = () => { callback.call(this, `${ child.properties.key }`); };\n\n\t\treturn existingProperty ? after(existingProperty, property) : property;\n\t}\n\n\tprotected onRequestClose(key: string) {\n\t\tconst { onRequestClose } = this.properties;\n\t\tonRequestClose && onRequestClose(key);\n\t}\n\n\tprotected onRequestOpen(key: string) {\n\t\tconst { onRequestOpen } = this.properties;\n\t\tonRequestOpen && onRequestOpen(key);\n\t}\n\n\tprotected renderChildren(): DNode[] {\n\t\tconst {\n\t\t\topenKeys = [],\n\t\t\ttheme\n\t\t} = this.properties;\n\n\t\treturn this.children.filter((child) => child).map(child => {\n\t\t\t// null checks skipped since children are filtered prior to mapping\n\t\t\tassign(child!.properties, {\n\t\t\t\tonRequestClose: this._assignCallback(child!, 'onRequestClose', this.onRequestClose),\n\t\t\t\tonRequestOpen: this._assignCallback(child!, 'onRequestOpen', this.onRequestOpen),\n\t\t\t\topen: includes(openKeys, child!.properties.key),\n\t\t\t\ttheme\n\t\t\t});\n\n\t\t\treturn child;\n\t\t});\n\t}\n\n\trender(): DNode {\n\t\treturn v('div', { classes: this.theme(css.root) }, this.renderChildren());\n\t}\n}\n"]}