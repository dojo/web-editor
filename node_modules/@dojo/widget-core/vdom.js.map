{"version":3,"file":"vdom.js","sourceRoot":"","sources":["vdom.ts"],"names":[],"mappings":"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","sourcesContent":["import global from '@dojo/shim/global';\nimport {\n\tCoreProperties,\n\tDefaultWidgetBaseInterface,\n\tDNode,\n\tHNode,\n\tWNode,\n\tProjectionOptions,\n\tProjection,\n\tSupportedClassName,\n\tTransitionStrategy,\n\tVirtualDomProperties\n} from './interfaces';\nimport { from as arrayFrom } from '@dojo/shim/array';\nimport { isWNode, isHNode, HNODE } from './d';\nimport { isWidgetBaseConstructor } from './Registry';\nimport WeakMap from '@dojo/shim/WeakMap';\nimport NodeHandler from './NodeHandler';\nimport RegistryHandler from './RegistryHandler';\n\nconst NAMESPACE_W3 = 'http://www.w3.org/';\nconst NAMESPACE_SVG = NAMESPACE_W3 + '2000/svg';\nconst NAMESPACE_XLINK = NAMESPACE_W3 + '1999/xlink';\n\nconst emptyArray: (InternalWNode | InternalHNode)[] = [];\n\nexport type RenderResult = DNode<any> | DNode<any>[];\n\nexport interface InternalWNode extends WNode<DefaultWidgetBaseInterface> {\n\n\t/**\n\t * The instance of the widget\n\t */\n\tinstance: DefaultWidgetBaseInterface;\n\n\t/**\n\t * The rendered DNodes from the instance\n\t */\n\trendered: InternalDNode[];\n\n\t/**\n\t * Core properties that are used by the widget core system\n\t */\n\tcoreProperties: CoreProperties;\n\n\t/**\n\t * Children for the WNode\n\t */\n\tchildren: InternalDNode[];\n}\n\nexport interface InternalHNode extends HNode {\n\n\t/**\n\t * Children for the HNode\n\t */\n\tchildren?: InternalDNode[];\n\n\tinserted?: boolean;\n\n\t/**\n\t * Bag used to still decorate properties on a deferred properties callback\n\t */\n\tdecoratedDeferredProperties?: VirtualDomProperties;\n\n\t/**\n\t * DOM element\n\t */\n\tdomNode?: Element | Text;\n}\n\nexport type InternalDNode = InternalHNode | InternalWNode;\n\nexport interface WidgetData {\n\tonElementCreated: Function;\n\tonElementUpdated: Function;\n\tonDetach: () => void;\n\tonAttach: () => void;\n\tparentInvalidate?: Function;\n\tdirty: boolean;\n\tregistry: () => RegistryHandler;\n\tnodeHandler: NodeHandler;\n\tcoreProperties: CoreProperties;\n\tinvalidate: Function;\n}\n\nexport const widgetInstanceMap = new WeakMap<any, WidgetData>();\n\nfunction same(dnode1: InternalDNode, dnode2: InternalDNode) {\n\tif (isHNode(dnode1) && isHNode(dnode2)) {\n\t\tif (dnode1.tag !== dnode2.tag) {\n\t\t\treturn false;\n\t\t}\n\t\tif (dnode1.properties.key !== dnode2.properties.key) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\telse if (isWNode(dnode1) && isWNode(dnode2)) {\n\t\tif (dnode1.widgetConstructor !== dnode2.widgetConstructor) {\n\t\t\treturn false;\n\t\t}\n\t\tif (dnode1.properties.key !== dnode2.properties.key) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nconst missingTransition = function() {\n\tthrow new Error('Provide a transitions object to the projectionOptions to do animations');\n};\n\nfunction getProjectionOptions(projectorOptions?: Partial<ProjectionOptions>): ProjectionOptions {\n\tconst defaults = {\n\t\tnamespace: undefined,\n\t\tstyleApplyer: function(domNode: HTMLElement, styleName: string, value: string) {\n\t\t\t(domNode.style as any)[styleName] = value;\n\t\t},\n\t\ttransitions: {\n\t\t\tenter: missingTransition,\n\t\t\texit: missingTransition\n\t\t},\n\t\tdeferredRenderCallbacks: [],\n\t\tafterRenderCallbacks: [],\n\t\tnodeMap: new WeakMap(),\n\t\tmerge: false\n\t};\n\treturn { ...defaults, ...projectorOptions } as ProjectionOptions;\n}\n\nfunction checkStyleValue(styleValue: Object) {\n\tif (typeof styleValue !== 'string') {\n\t\tthrow new Error('Style values must be strings');\n\t}\n}\n\nfunction updateEvents(\n\tdomNode: Node,\n\tpropName: string,\n\tproperties: VirtualDomProperties,\n\tprojectionOptions: ProjectionOptions,\n\tpreviousProperties?: VirtualDomProperties\n) {\n\tconst previous = previousProperties || Object.create(null);\n\tconst currentValue = properties[propName];\n\tconst previousValue = previous[propName];\n\n\tconst eventName = propName.substr(2);\n\tconst eventMap = projectionOptions.nodeMap.get(domNode) || new WeakMap();\n\n\tif (previousValue) {\n\t\tconst previousEvent = eventMap.get(previousValue);\n\t\tdomNode.removeEventListener(eventName, previousEvent);\n\t}\n\n\tlet callback = currentValue.bind(properties.bind);\n\n\tif (eventName === 'input') {\n\t\tcallback = function(this: any, evt: Event) {\n\t\t\tcurrentValue.call(this, evt);\n\t\t\t(evt.target as any)['oninput-value'] = (evt.target as HTMLInputElement).value;\n\t\t}.bind(properties.bind);\n\t}\n\n\tdomNode.addEventListener(eventName, callback);\n\teventMap.set(currentValue, callback);\n\tprojectionOptions.nodeMap.set(domNode, eventMap);\n}\n\nfunction addClasses(domNode: Node, classes: SupportedClassName) {\n\tif (classes) {\n\t\tconst classNames = classes.split(' ');\n\t\tfor (let i = 0; i < classNames.length; i++) {\n\t\t\t(domNode as Element).classList.add(classNames[i]);\n\t\t}\n\t}\n}\n\nfunction removeClasses(domNode: Node, classes: SupportedClassName) {\n\tif (classes) {\n\t\tconst classNames = classes.split(' ');\n\t\tfor (let i = 0; i < classNames.length; i++) {\n\t\t\t(domNode as Element).classList.remove(classNames[i]);\n\t\t}\n\t}\n}\n\nfunction setProperties(domNode: Node, properties: VirtualDomProperties, projectionOptions: ProjectionOptions) {\n\tconst propNames = Object.keys(properties);\n\tconst propCount = propNames.length;\n\tfor (let i = 0; i < propCount; i++) {\n\t\tconst propName = propNames[i];\n\t\tlet propValue = properties[propName];\n\t\tif (propName === 'classes') {\n\t\t\tconst currentClasses = Array.isArray(propValue) ? propValue : [ propValue ];\n\t\t\tif (!(domNode as Element).className) {\n\t\t\t\t(domNode as Element).className = currentClasses.join(' ').trim();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfor (let i = 0; i < currentClasses.length; i++) {\n\t\t\t\t\taddClasses(domNode, currentClasses[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (propName === 'styles') {\n\t\t\tconst styleNames = Object.keys(propValue);\n\t\t\tconst styleCount = styleNames.length;\n\t\t\tfor (let j = 0; j < styleCount; j++) {\n\t\t\t\tconst styleName = styleNames[j];\n\t\t\t\tconst styleValue = propValue[styleName];\n\t\t\t\tif (styleValue) {\n\t\t\t\t\tcheckStyleValue(styleValue);\n\t\t\t\t\tprojectionOptions.styleApplyer!(domNode as HTMLElement, styleName, styleValue);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (propName !== 'key' && propValue !== null && propValue !== undefined) {\n\t\t\tconst type = typeof propValue;\n\t\t\tif (type === 'function' && propName.lastIndexOf('on', 0) === 0) {\n\t\t\t\tupdateEvents(domNode, propName, properties, projectionOptions);\n\t\t\t}\n\t\t\telse if (type === 'string' && propName !== 'value' && propName !== 'innerHTML') {\n\t\t\t\tif (projectionOptions.namespace === NAMESPACE_SVG && propName === 'href') {\n\t\t\t\t\t(domNode as Element).setAttributeNS(NAMESPACE_XLINK, propName, propValue);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t(domNode as Element).setAttribute(propName, propValue);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t(domNode as any)[propName] = propValue;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction removeOrphanedEvents(\n\tdomNode: Node,\n\tpreviousProperties: VirtualDomProperties,\n\tproperties: VirtualDomProperties,\n\tprojectionOptions: ProjectionOptions\n) {\n\tconst eventMap = projectionOptions.nodeMap.get(domNode);\n\tif (eventMap) {\n\t\tObject.keys(previousProperties).forEach((propName) => {\n\t\t\tif (propName.substr(0, 2) === 'on' && !properties[propName]) {\n\t\t\t\tconst eventCallback = eventMap.get(previousProperties[propName]);\n\t\t\t\tif (eventCallback) {\n\t\t\t\t\tdomNode.removeEventListener(propName.substr(2), eventCallback);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction updateProperties(\n\tdomNode: Node,\n\tpreviousProperties: VirtualDomProperties,\n\tproperties: VirtualDomProperties,\n\tprojectionOptions: ProjectionOptions\n) {\n\tlet propertiesUpdated = false;\n\tconst propNames = Object.keys(properties);\n\tconst propCount = propNames.length;\n\tif (propNames.indexOf('classes') === -1 && previousProperties.classes) {\n\t\tif (Array.isArray(previousProperties.classes)) {\n\t\t\tfor (let i = 0; i < previousProperties.classes.length; i++) {\n\t\t\t\tremoveClasses(domNode, previousProperties.classes[i]);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tremoveClasses(domNode, previousProperties.classes);\n\t\t}\n\t}\n\n\tremoveOrphanedEvents(domNode, previousProperties, properties, projectionOptions);\n\n\tfor (let i = 0; i < propCount; i++) {\n\t\tconst propName = propNames[i];\n\t\tlet propValue = properties[propName];\n\t\tconst previousValue = previousProperties![propName];\n\t\tif (propName === 'classes') {\n\t\t\tconst previousClasses = Array.isArray(previousValue) ? previousValue : [ previousValue ];\n\t\t\tconst currentClasses = Array.isArray(propValue) ? propValue : [ propValue ];\n\t\t\tif (previousClasses && previousClasses.length > 0) {\n\t\t\t\tif (!propValue || propValue.length === 0) {\n\t\t\t\t\tfor (let i = 0; i < previousClasses.length; i++) {\n\t\t\t\t\t\tremoveClasses(domNode, previousClasses[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconst newClasses: (null | undefined | string)[] = [ ...currentClasses ];\n\t\t\t\t\tfor (let i = 0; i < previousClasses.length; i++) {\n\t\t\t\t\t\tconst previousClassName = previousClasses[i];\n\t\t\t\t\t\tif (previousClassName) {\n\t\t\t\t\t\t\tconst classIndex = newClasses.indexOf(previousClassName);\n\t\t\t\t\t\t\tif (classIndex === -1) {\n\t\t\t\t\t\t\t\tremoveClasses(domNode, previousClassName);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tnewClasses.splice(classIndex, 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor (let i = 0; i < newClasses.length; i++) {\n\t\t\t\t\t\taddClasses(domNode, newClasses[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfor (let i = 0; i < currentClasses.length; i++) {\n\t\t\t\t\taddClasses(domNode, currentClasses[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (propName === 'styles') {\n\t\t\tconst styleNames = Object.keys(propValue);\n\t\t\tconst styleCount = styleNames.length;\n\t\t\tfor (let j = 0; j < styleCount; j++) {\n\t\t\t\tconst styleName = styleNames[j];\n\t\t\t\tconst newStyleValue = propValue[styleName];\n\t\t\t\tconst oldStyleValue = previousValue[styleName];\n\t\t\t\tif (newStyleValue === oldStyleValue) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tpropertiesUpdated = true;\n\t\t\t\tif (newStyleValue) {\n\t\t\t\t\tcheckStyleValue(newStyleValue);\n\t\t\t\t\tprojectionOptions.styleApplyer!(domNode as HTMLElement, styleName, newStyleValue);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tprojectionOptions.styleApplyer!(domNode as HTMLElement, styleName, '');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (!propValue && typeof previousValue === 'string') {\n\t\t\t\tpropValue = '';\n\t\t\t}\n\t\t\tif (propName === 'value') {\n\t\t\t\tconst domValue = (domNode as any)[propName];\n\t\t\t\tif (\n\t\t\t\t\tdomValue !== propValue\n\t\t\t\t\t&& ((domNode as any)['oninput-value']\n\t\t\t\t\t\t? domValue === (domNode as any)['oninput-value']\n\t\t\t\t\t\t: propValue !== previousValue\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\t(domNode as any)[propName] = propValue;\n\t\t\t\t\t(domNode as any)['oninput-value'] = undefined;\n\t\t\t\t}\n\t\t\t\tif (propValue !== previousValue) {\n\t\t\t\t\tpropertiesUpdated = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (propValue !== previousValue) {\n\t\t\t\tconst type = typeof propValue;\n\t\t\t\tif (type === 'function' && propName.lastIndexOf('on', 0) === 0) {\n\t\t\t\t\tupdateEvents(domNode, propName, properties, projectionOptions, previousProperties);\n\t\t\t\t}\n\t\t\t\telse if (type === 'string' && propName !== 'innerHTML') {\n\t\t\t\t\tif (projectionOptions.namespace === NAMESPACE_SVG && propName === 'href') {\n\t\t\t\t\t\t(domNode as Element).setAttributeNS(NAMESPACE_XLINK, propName, propValue);\n\t\t\t\t\t}\n\t\t\t\t\telse if (propName === 'role' && propValue === '') {\n\t\t\t\t\t\t(domNode as any).removeAttribute(propName);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t(domNode as Element).setAttribute(propName, propValue);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif ((domNode as any)[propName] !== propValue) { // Comparison is here for side-effects in Edge with scrollLeft and scrollTop\n\t\t\t\t\t\t(domNode as any)[propName] = propValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tpropertiesUpdated = true;\n\t\t\t}\n\t\t}\n\t}\n\treturn propertiesUpdated;\n}\n\nfunction findIndexOfChild(children: InternalDNode[], sameAs: InternalDNode, start: number) {\n\tfor (let i = start; i < children.length; i++) {\n\t\tif (same(children[i], sameAs)) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\nexport function toTextHNode(data: any): InternalHNode {\n\treturn {\n\t\ttag: '',\n\t\tproperties: {},\n\t\tchildren: undefined,\n\t\ttext: `${data}`,\n\t\tdomNode: undefined,\n\t\ttype: HNODE\n\t};\n}\n\nexport function filterAndDecorateChildren(children: undefined | DNode | DNode[], instance: DefaultWidgetBaseInterface): InternalDNode[] {\n\tif (children === undefined) {\n\t\treturn emptyArray;\n\t}\n\tchildren = Array.isArray(children) ? children : [ children ];\n\n\tfor (let i = 0; i < children.length; ) {\n\t\tconst child = children[i] as InternalDNode;\n\t\tif (child === undefined || child === null) {\n\t\t\tchildren.splice(i, 1);\n\t\t\tcontinue;\n\t\t}\n\t\telse if (typeof child === 'string') {\n\t\t\tchildren[i] = toTextHNode(child);\n\t\t}\n\t\telse {\n\t\t\tif (isHNode(child)) {\n\t\t\t\tif (child.properties.bind === undefined) {\n\t\t\t\t\t(child.properties as any).bind = instance;\n\t\t\t\t\tif (child.children && child.children.length > 0) {\n\t\t\t\t\t\tfilterAndDecorateChildren(child.children, instance);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (!child.coreProperties) {\n\t\t\t\t\tconst instanceData = widgetInstanceMap.get(instance)!;\n\t\t\t\t\tchild.coreProperties = {\n\t\t\t\t\t\tbind: instance,\n\t\t\t\t\t\tbaseRegistry: instanceData.coreProperties.baseRegistry\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (child.children && child.children.length > 0) {\n\t\t\t\t\tfilterAndDecorateChildren(child.children, instance);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\ti++;\n\t}\n\treturn children as InternalDNode[];\n}\n\nfunction hasRenderChanged(previousRendered: InternalDNode[], rendered: InternalDNode | InternalDNode[]): boolean {\n\tconst arrayRender = Array.isArray(rendered);\n\tif (arrayRender) {\n\t\treturn previousRendered !== rendered;\n\t}\n\telse {\n\t\treturn Array.isArray(previousRendered) && previousRendered[0] !== rendered;\n\t}\n}\n\nfunction nodeAdded(dnode: InternalDNode, transitions: TransitionStrategy) {\n\tif (isHNode(dnode) && dnode.properties) {\n\t\tconst enterAnimation = dnode.properties.enterAnimation;\n\t\tif (enterAnimation) {\n\t\t\tif (typeof enterAnimation === 'function') {\n\t\t\t\tenterAnimation(dnode.domNode as Element, dnode.properties);\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttransitions.enter(dnode.domNode as Element, dnode.properties, enterAnimation as string);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction callOnDetach(dNodes: InternalDNode | InternalDNode[], parentInstance: DefaultWidgetBaseInterface): void {\n\tdNodes = Array.isArray(dNodes) ? dNodes : [ dNodes ];\n\tfor (let i = 0; i < dNodes.length; i++) {\n\t\tconst dNode = dNodes[i];\n\t\tif (isWNode(dNode)) {\n\t\t\tcallOnDetach(dNode.rendered, dNode.instance);\n\t\t\tconst instanceData = widgetInstanceMap.get(dNode.instance)!;\n\t\t\tinstanceData.onDetach();\n\t\t}\n\t\telse {\n\t\t\tif (dNode.children) {\n\t\t\t\tcallOnDetach(dNode.children as InternalDNode[], parentInstance);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction nodeToRemove(dnode: InternalDNode, transitions: TransitionStrategy, projectionOptions: ProjectionOptions) {\n\tif (isWNode(dnode)) {\n\t\tconst rendered = dnode.rendered || emptyArray;\n\t\tfor (let i = 0; i < rendered.length; i++) {\n\t\t\tconst child = rendered[i];\n\t\t\tif (isHNode(child)) {\n\t\t\t\tchild.domNode!.parentNode!.removeChild(child.domNode!);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tnodeToRemove(child, transitions, projectionOptions);\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tconst domNode = dnode.domNode;\n\t\tconst properties = dnode.properties;\n\t\tconst exitAnimation = properties.exitAnimation;\n\t\tif (properties && exitAnimation) {\n\t\t\t(domNode as HTMLElement).style.pointerEvents = 'none';\n\t\t\tconst removeDomNode = function() {\n\t\t\t\tdomNode && domNode.parentNode && domNode.parentNode.removeChild(domNode);\n\t\t\t};\n\t\t\tif (typeof exitAnimation === 'function') {\n\t\t\t\texitAnimation(domNode as Element, removeDomNode, properties);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttransitions.exit(dnode.domNode as Element, properties, exitAnimation as string, removeDomNode);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tdomNode && domNode.parentNode && domNode.parentNode.removeChild(domNode);\n\t}\n}\n\nfunction checkDistinguishable(childNodes: InternalDNode[], indexToCheck: number, parentNode: Element, operation: string) {\n\tconst childNode = childNodes[indexToCheck];\n\tif (isHNode(childNode) && childNode.tag === '') {\n\t\treturn; // Text nodes need not be distinguishable\n\t}\n\tconst properties = childNode.properties;\n\tconst key = properties && properties.key;\n\n\tif (!key) {\n\t\tfor (let i = 0; i < childNodes.length; i++) {\n\t\t\tif (i !== indexToCheck) {\n\t\t\t\tconst node = childNodes[i];\n\t\t\t\tif (same(node, childNode)) {\n\t\t\t\t\tif (isWNode(childNode)) {\n\t\t\t\t\t\tconst widgetName = (childNode.widgetConstructor as any).name;\n\t\t\t\t\t\tlet errorMsg = 'It is recommended to provide a unique \\'key\\' property when using the same widget multiple times as siblings';\n\n\t\t\t\t\t\tif (widgetName) {\n\t\t\t\t\t\t\terrorMsg = `It is recommended to provide a unique 'key' property when using the same widget (${widgetName}) multiple times as siblings`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsole.warn(errorMsg);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (operation === 'added') {\n\t\t\t\t\t\t\tthrow new Error(parentNode.tagName + ' had a ' + childNode.tag + ' child ' +\n\t\t\t\t\t\t\t\t'added, but there is now more than one. You must add unique key properties to make them distinguishable.');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tthrow new Error(parentNode.tagName + ' had a ' + childNode.tag + ' child ' +\n\t\t\t\t\t\t\t\t'removed, but there were more than one. You must add unique key properties to make them distinguishable.');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction updateChildren(\n\tdomNode: Element,\n\toldChildren: InternalDNode[],\n\tnewChildren: InternalDNode[],\n\tparentInstance: DefaultWidgetBaseInterface,\n\tprojectionOptions: ProjectionOptions\n) {\n\toldChildren = oldChildren || emptyArray;\n\tnewChildren = newChildren;\n\tconst oldChildrenLength = oldChildren.length;\n\tconst newChildrenLength = newChildren.length;\n\tconst transitions = projectionOptions.transitions!;\n\n\tlet oldIndex = 0;\n\tlet newIndex = 0;\n\tlet i: number;\n\tlet textUpdated = false;\n\twhile (newIndex < newChildrenLength) {\n\t\tconst oldChild = (oldIndex < oldChildrenLength) ? oldChildren[oldIndex] : undefined;\n\t\tconst newChild = newChildren[newIndex];\n\n\t\tif (oldChild !== undefined && same(oldChild, newChild)) {\n\t\t\ttextUpdated = updateDom(oldChild, newChild, projectionOptions, domNode, parentInstance) || textUpdated;\n\t\t\toldIndex++;\n\t\t}\n\t\telse {\n\t\t\tconst findOldIndex = findIndexOfChild(oldChildren, newChild, oldIndex + 1);\n\t\t\tif (findOldIndex >= 0) {\n\t\t\t\tfor (i = oldIndex; i < findOldIndex; i++) {\n\t\t\t\t\tconst oldChild = oldChildren[i];\n\t\t\t\t\tprojectionOptions.afterRenderCallbacks.push(() => {\n\t\t\t\t\t\tcallOnDetach(oldChild, parentInstance);\n\t\t\t\t\t});\n\t\t\t\t\tnodeToRemove(oldChild, transitions, projectionOptions);\n\t\t\t\t\tcheckDistinguishable(oldChildren, i, domNode, 'removed');\n\t\t\t\t}\n\t\t\t\ttextUpdated = updateDom(oldChildren[findOldIndex], newChild, projectionOptions, domNode, parentInstance) || textUpdated;\n\t\t\t\toldIndex = findOldIndex + 1;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet insertBefore: Node | undefined = undefined;\n\t\t\t\tlet child: InternalDNode = oldChildren[oldIndex];\n\t\t\t\tif (child) {\n\t\t\t\t\tlet nextIndex = oldIndex + 1;\n\t\t\t\t\twhile (insertBefore === undefined) {\n\t\t\t\t\t\tif (isWNode(child)) {\n\t\t\t\t\t\t\tif (child.rendered) {\n\t\t\t\t\t\t\t\tchild = child.rendered[0];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (oldChildren[nextIndex]) {\n\t\t\t\t\t\t\t\tchild = oldChildren[nextIndex];\n\t\t\t\t\t\t\t\tnextIndex++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tinsertBefore = child.domNode;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcreateDom(newChild, domNode, insertBefore, projectionOptions, parentInstance);\n\t\t\t\tnodeAdded(newChild, transitions);\n\t\t\t\tcheckDistinguishable(newChildren, newIndex, domNode, 'added');\n\t\t\t}\n\t\t}\n\t\tnewIndex++;\n\t}\n\tif (oldChildrenLength > oldIndex) {\n\t\t// Remove child fragments\n\t\tfor (i = oldIndex; i < oldChildrenLength; i++) {\n\t\t\tconst oldChild = oldChildren[i];\n\t\t\tprojectionOptions.afterRenderCallbacks.push(() => {\n\t\t\t\tcallOnDetach(oldChild, parentInstance);\n\t\t\t});\n\t\t\tnodeToRemove(oldChild, transitions, projectionOptions);\n\t\t\tcheckDistinguishable(oldChildren, i, domNode, 'removed');\n\t\t}\n\t}\n\treturn textUpdated;\n}\n\nfunction addChildren(\n\tdomNode: Node,\n\tchildren: InternalDNode[] | undefined,\n\tprojectionOptions: ProjectionOptions,\n\tparentInstance: DefaultWidgetBaseInterface,\n\tinsertBefore: undefined | Node = undefined,\n\tchildNodes?: Node[]\n) {\n\tif (children === undefined) {\n\t\treturn;\n\t}\n\n\tif (projectionOptions.merge && childNodes === undefined) {\n\t\tchildNodes = arrayFrom(domNode.childNodes);\n\t}\n\n\tfor (let i = 0; i < children.length; i++) {\n\t\tconst child = children[i];\n\n\t\tif (isHNode(child)) {\n\t\t\tif (projectionOptions.merge && childNodes) {\n\t\t\t\tlet domElement: HTMLElement | undefined = undefined;\n\t\t\t\twhile (child.domNode === undefined && childNodes.length > 0) {\n\t\t\t\t\tdomElement = childNodes.shift() as HTMLElement;\n\t\t\t\t\tif (domElement && domElement.tagName === (child.tag.toUpperCase() || undefined)) {\n\t\t\t\t\t\tchild.domNode = domElement;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tcreateDom(child, domNode, insertBefore, projectionOptions, parentInstance);\n\t\t}\n\t\telse {\n\t\t\tcreateDom(child, domNode, insertBefore, projectionOptions, parentInstance, childNodes);\n\t\t}\n\t}\n}\n\nfunction initPropertiesAndChildren(\n\tdomNode: Node,\n\tdnode: InternalHNode,\n\tparentInstance: DefaultWidgetBaseInterface,\n\tprojectionOptions: ProjectionOptions\n) {\n\taddChildren(domNode, dnode.children, projectionOptions, parentInstance, undefined);\n\tif (typeof dnode.deferredPropertiesCallback === 'function') {\n\t\taddDeferredProperties(dnode, projectionOptions);\n\t}\n\tsetProperties(domNode, dnode.properties, projectionOptions);\n\tif (dnode.properties.key !== null && dnode.properties.key !== undefined) {\n\t\tconst instanceData = widgetInstanceMap.get(parentInstance)!;\n\t\tinstanceData.nodeHandler.add(domNode as HTMLElement, `${dnode.properties.key}`);\n\t\tprojectionOptions.afterRenderCallbacks.push(() => {\n\t\t\tinstanceData.onElementCreated(domNode as HTMLElement, dnode.properties.key as any);\n\t\t});\n\t}\n\tdnode.inserted = true;\n}\n\nfunction createDom(\n\tdnode: InternalDNode,\n\tparentNode: Node,\n\tinsertBefore: Node | undefined,\n\tprojectionOptions: ProjectionOptions,\n\tparentInstance: DefaultWidgetBaseInterface,\n\tchildNodes?: Node[]\n) {\n\tlet domNode: Node | undefined;\n\tif (isWNode(dnode)) {\n\t\tlet { widgetConstructor } = dnode;\n\t\tconst parentInstanceData = widgetInstanceMap.get(parentInstance)!;\n\t\tif (!isWidgetBaseConstructor<DefaultWidgetBaseInterface>(widgetConstructor)) {\n\t\t\tconst item = parentInstanceData.registry().get<DefaultWidgetBaseInterface>(widgetConstructor);\n\t\t\tif (item === null) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\twidgetConstructor = item;\n\t\t}\n\t\tconst instance = new widgetConstructor();\n\t\tdnode.instance = instance;\n\t\tconst instanceData = widgetInstanceMap.get(instance)!;\n\t\tinstanceData.parentInvalidate = parentInstanceData.invalidate;\n\t\tinstance.__setCoreProperties__(dnode.coreProperties);\n\t\tinstance.__setChildren__(dnode.children);\n\t\tinstance.__setProperties__(dnode.properties);\n\t\tconst rendered = instance.__render__();\n\t\tif (rendered) {\n\t\t\tconst filteredRendered = filterAndDecorateChildren(rendered, instance);\n\t\t\tdnode.rendered = filteredRendered;\n\t\t\taddChildren(parentNode, filteredRendered, projectionOptions, instance, insertBefore, childNodes);\n\t\t}\n\t\tinstanceData.nodeHandler.addRoot();\n\t\tprojectionOptions.afterRenderCallbacks.push(() => {\n\t\t\tinstanceData.onAttach();\n\t\t});\n\t}\n\telse {\n\t\tif (projectionOptions.merge && projectionOptions.mergeElement !== undefined) {\n\t\t\tdomNode = dnode.domNode = projectionOptions.mergeElement;\n\t\t\tprojectionOptions.mergeElement = undefined;\n\t\t\tinitPropertiesAndChildren(domNode!, dnode, parentInstance, projectionOptions);\n\t\t\treturn;\n\t\t}\n\t\tconst doc = parentNode.ownerDocument;\n\t\tif (dnode.tag === '') {\n\t\t\tif (dnode.domNode !== undefined) {\n\t\t\t\tconst newDomNode = dnode.domNode.ownerDocument.createTextNode(dnode.text!);\n\t\t\t\tdnode.domNode.parentNode!.replaceChild(newDomNode, dnode.domNode);\n\t\t\t\tdnode.domNode = newDomNode;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdomNode = dnode.domNode = doc.createTextNode(dnode.text!);\n\t\t\t\tif (insertBefore !== undefined) {\n\t\t\t\t\tparentNode.insertBefore(domNode, insertBefore);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tparentNode.appendChild(domNode);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (dnode.domNode === undefined) {\n\t\t\t\tif (dnode.tag === 'svg') {\n\t\t\t\t\tprojectionOptions = { ...projectionOptions, ...{ namespace: NAMESPACE_SVG } };\n\t\t\t\t}\n\t\t\t\tif (projectionOptions.namespace !== undefined) {\n\t\t\t\t\tdomNode = dnode.domNode = doc.createElementNS(projectionOptions.namespace, dnode.tag);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdomNode = dnode.domNode = (dnode.domNode || doc.createElement(dnode.tag));\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdomNode = dnode.domNode;\n\t\t\t}\n\t\t\tif (insertBefore !== undefined) {\n\t\t\t\tparentNode.insertBefore(domNode, insertBefore);\n\t\t\t}\n\t\t\telse if (domNode!.parentNode !== parentNode) {\n\t\t\t\tparentNode.appendChild(domNode);\n\t\t\t}\n\t\t\tinitPropertiesAndChildren(domNode!, dnode, parentInstance, projectionOptions);\n\t\t}\n\t}\n}\n\nfunction updateDom(previous: any, dnode: InternalDNode, projectionOptions: ProjectionOptions, parentNode: Element, parentInstance: DefaultWidgetBaseInterface) {\n\tif (isWNode(dnode)) {\n\t\tconst { instance, rendered: previousRendered } = previous;\n\t\tif (instance && previousRendered) {\n\t\t\tconst instanceData = widgetInstanceMap.get(instance)!;\n\t\t\tinstance.__setCoreProperties__(dnode.coreProperties);\n\t\t\tinstance.__setChildren__(dnode.children);\n\t\t\tinstance.__setProperties__(dnode.properties);\n\t\t\tdnode.instance = instance;\n\t\t\tconst rendered = instance.__render__();\n\t\t\tdnode.rendered = filterAndDecorateChildren(rendered, instance);\n\t\t\tif (hasRenderChanged(previousRendered, rendered)) {\n\t\t\t\tupdateChildren(parentNode, previousRendered, dnode.rendered, instance, projectionOptions);\n\t\t\t\tinstanceData.nodeHandler.addRoot();\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tcreateDom(dnode, parentNode, undefined, projectionOptions, parentInstance);\n\t\t}\n\t}\n\telse {\n\t\tif (previous === dnode) {\n\t\t\treturn false;\n\t\t}\n\t\tconst domNode = previous.domNode!;\n\t\tlet textUpdated = false;\n\t\tlet updated = false;\n\t\tdnode.inserted = previous.inserted;\n\t\tif (dnode.tag === '') {\n\t\t\tif (dnode.text !== previous.text) {\n\t\t\t\tconst newDomNode = domNode.ownerDocument.createTextNode(dnode.text!);\n\t\t\t\tdomNode.parentNode!.replaceChild(newDomNode, domNode);\n\t\t\t\tdnode.domNode = newDomNode;\n\t\t\t\ttextUpdated = true;\n\t\t\t\treturn textUpdated;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (dnode.tag.lastIndexOf('svg', 0) === 0) {\n\t\t\t\tprojectionOptions = { ...projectionOptions, ...{ namespace: NAMESPACE_SVG } };\n\t\t\t}\n\t\t\tif (previous.children !== dnode.children) {\n\t\t\t\tconst children = filterAndDecorateChildren(dnode.children, parentInstance);\n\t\t\t\tdnode.children = children;\n\t\t\t\tupdated = updateChildren(domNode, previous.children, children, parentInstance, projectionOptions) || updated;\n\t\t\t}\n\n\t\t\tif (typeof dnode.deferredPropertiesCallback === 'function') {\n\t\t\t\taddDeferredProperties(dnode, projectionOptions);\n\t\t\t}\n\n\t\t\tupdated = updateProperties(domNode, previous.properties, dnode.properties, projectionOptions) || updated;\n\n\t\t\tif (dnode.properties.key !== null && dnode.properties.key !== undefined) {\n\t\t\t\tconst instanceData = widgetInstanceMap.get(parentInstance)!;\n\t\t\t\tinstanceData.nodeHandler.add(domNode, `${dnode.properties.key}`);\n\t\t\t\tprojectionOptions.afterRenderCallbacks.push(() => {\n\t\t\t\t\tinstanceData.onElementUpdated(domNode as HTMLElement, dnode.properties.key as any);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tif (updated && dnode.properties && dnode.properties.updateAnimation) {\n\t\t\tdnode.properties.updateAnimation(domNode as Element, dnode.properties, previous.properties);\n\t\t}\n\t\tdnode.domNode = previous.domNode;\n\t\treturn textUpdated;\n\t}\n}\n\nfunction addDeferredProperties(hnode: InternalHNode, projectionOptions: ProjectionOptions) {\n\t// transfer any properties that have been passed - as these must be decorated properties\n\thnode.decoratedDeferredProperties = hnode.properties;\n\tconst properties = hnode.deferredPropertiesCallback!(!!hnode.inserted);\n\thnode.properties = { ...properties, ...hnode.decoratedDeferredProperties };\n\tprojectionOptions.deferredRenderCallbacks.push(() => {\n\t\tconst properties = {\n\t\t\t...hnode.deferredPropertiesCallback!(!!hnode.inserted),\n\t\t\t...hnode.decoratedDeferredProperties\n\t\t};\n\t\tupdateProperties(hnode.domNode!, hnode.properties, properties, projectionOptions);\n\t\thnode.properties = properties;\n\t});\n}\n\nfunction runDeferredRenderCallbacks(projectionOptions: ProjectionOptions) {\n\tif (projectionOptions.deferredRenderCallbacks.length) {\n\t\tif (projectionOptions.sync) {\n\t\t\twhile (projectionOptions.deferredRenderCallbacks.length) {\n\t\t\t\tconst callback = projectionOptions.deferredRenderCallbacks.shift();\n\t\t\t\tcallback && callback();\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tglobal.requestAnimationFrame(() => {\n\t\t\t\twhile (projectionOptions.deferredRenderCallbacks.length) {\n\t\t\t\t\tconst callback = projectionOptions.deferredRenderCallbacks.shift();\n\t\t\t\t\tcallback && callback();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n\nfunction runAfterRenderCallbacks(projectionOptions: ProjectionOptions) {\n\tif (projectionOptions.sync) {\n\t\twhile (projectionOptions.afterRenderCallbacks.length) {\n\t\t\tconst callback = projectionOptions.afterRenderCallbacks.shift();\n\t\t\tcallback && callback();\n\t\t}\n\t}\n\telse {\n\t\tif (global.requestIdleCallback) {\n\t\t\tglobal.requestIdleCallback(() => {\n\t\t\t\twhile (projectionOptions.afterRenderCallbacks.length) {\n\t\t\t\t\tconst callback = projectionOptions.afterRenderCallbacks.shift();\n\t\t\t\t\tcallback && callback();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tsetTimeout(() => {\n\t\t\t\twhile (projectionOptions.afterRenderCallbacks.length) {\n\t\t\t\t\tconst callback = projectionOptions.afterRenderCallbacks.shift();\n\t\t\t\t\tcallback && callback();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n\nfunction createProjection(dnode: InternalDNode | InternalDNode[], parentInstance: DefaultWidgetBaseInterface, projectionOptions: ProjectionOptions): Projection {\n\tlet projectionDNode = Array.isArray(dnode) ? dnode : [ dnode ];\n\tprojectionOptions.merge = false;\n\treturn {\n\t\tupdate: function(updatedDNode: RenderResult) {\n\t\t\tlet domNode = projectionOptions.rootNode;\n\n\t\t\tupdatedDNode = filterAndDecorateChildren(updatedDNode, parentInstance);\n\t\t\tupdateChildren(domNode, projectionDNode, updatedDNode as InternalDNode[], parentInstance, projectionOptions);\n\t\t\tconst instanceData = widgetInstanceMap.get(parentInstance)!;\n\t\t\tinstanceData.nodeHandler.addRoot();\n\t\t\trunDeferredRenderCallbacks(projectionOptions);\n\t\t\trunAfterRenderCallbacks(projectionOptions);\n\t\t\tprojectionDNode = updatedDNode as InternalDNode[];\n\t\t},\n\t\tdomNode: projectionOptions.rootNode\n\t};\n}\n\nexport const dom = {\n\tcreate: function(dNode: RenderResult, instance: DefaultWidgetBaseInterface, projectionOptions?: Partial<ProjectionOptions>): Projection {\n\t\tconst finalProjectorOptions = getProjectionOptions(projectionOptions);\n\t\tconst rootNode = document.createElement('div');\n\t\tfinalProjectorOptions.rootNode = rootNode;\n\t\tconst decoratedNode = filterAndDecorateChildren(dNode, instance);\n\t\taddChildren(rootNode, decoratedNode, finalProjectorOptions, instance, undefined);\n\t\tconst instanceData = widgetInstanceMap.get(instance)!;\n\t\tinstanceData.nodeHandler.addRoot();\n\t\tfinalProjectorOptions.afterRenderCallbacks.push(() => {\n\t\t\tinstanceData.onAttach();\n\t\t});\n\t\trunDeferredRenderCallbacks(finalProjectorOptions);\n\t\trunAfterRenderCallbacks(finalProjectorOptions);\n\t\treturn createProjection(decoratedNode, instance, finalProjectorOptions);\n\t},\n\tappend: function(parentNode: Element, dNode: RenderResult, instance: DefaultWidgetBaseInterface, projectionOptions?: Partial<ProjectionOptions>): Projection {\n\t\tconst finalProjectorOptions = getProjectionOptions(projectionOptions);\n\t\tfinalProjectorOptions.rootNode = parentNode;\n\t\tconst decoratedNode = filterAndDecorateChildren(dNode, instance);\n\t\taddChildren(parentNode, decoratedNode, finalProjectorOptions, instance, undefined);\n\t\tconst instanceData = widgetInstanceMap.get(instance)!;\n\t\tinstanceData.nodeHandler.addRoot();\n\t\tfinalProjectorOptions.afterRenderCallbacks.push(() => {\n\t\t\tinstanceData.onAttach();\n\t\t});\n\t\trunDeferredRenderCallbacks(finalProjectorOptions);\n\t\trunAfterRenderCallbacks(finalProjectorOptions);\n\t\treturn createProjection(decoratedNode, instance, finalProjectorOptions);\n\t},\n\tmerge: function(element: Element, dNode: RenderResult, instance: DefaultWidgetBaseInterface, projectionOptions?: Partial<ProjectionOptions>): Projection {\n\t\tif (Array.isArray(dNode)) {\n\t\t\tthrow new Error('Unable to merge an array of nodes. (consider adding one extra level to the virtual DOM)');\n\t\t}\n\t\tconst finalProjectorOptions = getProjectionOptions(projectionOptions);\n\t\tfinalProjectorOptions.merge = true;\n\t\tfinalProjectorOptions.mergeElement = element;\n\t\tfinalProjectorOptions.rootNode = element.parentNode as Element;\n\t\tconst decoratedNode = filterAndDecorateChildren(dNode, instance)[0] as InternalHNode;\n\n\t\tcreateDom(decoratedNode, finalProjectorOptions.rootNode, undefined, finalProjectorOptions, instance);\n\t\tconst instanceData = widgetInstanceMap.get(instance)!;\n\t\tinstanceData.nodeHandler.addRoot();\n\t\tfinalProjectorOptions.afterRenderCallbacks.push(() => {\n\t\t\tinstanceData.onAttach();\n\t\t});\n\t\trunDeferredRenderCallbacks(finalProjectorOptions);\n\t\trunAfterRenderCallbacks(finalProjectorOptions);\n\t\treturn createProjection(decoratedNode, instance, finalProjectorOptions);\n\t},\n\treplace: function(element: Element, dNode: RenderResult, instance: DefaultWidgetBaseInterface, projectionOptions?: Partial<ProjectionOptions>): Projection {\n\t\tif (Array.isArray(dNode)) {\n\t\t\tthrow new Error('Unable to replace a node with an array of nodes. (consider adding one extra level to the virtual DOM)');\n\t\t}\n\t\tconst finalProjectorOptions = getProjectionOptions(projectionOptions);\n\t\tconst decoratedNode = filterAndDecorateChildren(dNode, instance)[0] as InternalHNode;\n\t\tfinalProjectorOptions.rootNode = element.parentNode! as Element;\n\t\tcreateDom(decoratedNode, element.parentNode!, element, finalProjectorOptions, instance);\n\t\tconst instanceData = widgetInstanceMap.get(instance)!;\n\t\tinstanceData.nodeHandler.addRoot();\n\t\tfinalProjectorOptions.afterRenderCallbacks.push(() => {\n\t\t\tinstanceData.onAttach();\n\t\t});\n\t\trunDeferredRenderCallbacks(finalProjectorOptions);\n\t\trunAfterRenderCallbacks(finalProjectorOptions);\n\t\telement.parentNode!.removeChild(element);\n\t\treturn createProjection(decoratedNode, instance, finalProjectorOptions);\n\t}\n};\n"]}